/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot_dashboard 
 *  time: Tue May 25 2021 17:26:51 GMT+0800 (GMT+08:00)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-648fe2a1"],{"0076":function(e,t,a){"use strict";a("c11c")},"03ad":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"0493":function(e,t,a){},"0706":function(e,t,a){},"09fa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"empower"},[a("el-steps",{attrs:{active:e.allactive,simple:""}},[a("el-step",{attrs:{title:"填写认证信息",icon:"el-icon-edit"}}),a("el-step",{attrs:{title:"填写实验室基本信息",icon:"el-icon-upload"}}),a("el-step",{attrs:{title:"审核结果",icon:"el-icon-picture"}})],1),1==e.allactive?a("div",[a("el-steps",{attrs:{active:e.active}},[a("el-step",{attrs:{title:"认证企业新增",icon:"el-icon-s-check",description:"企业认证新增"}}),a("el-step",{attrs:{title:"预览提交",icon:"el-icon-picture"}})],1),1==e.active?a("div",{staticClass:"empowerone"},[a("el-card",{attrs:{shadow:"always"}},[a("el-form",{ref:"formrules",attrs:{model:e.authenticationForm,rules:e.formrules,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"企业名称",prop:"businessname"}},[a("el-input",{attrs:{placeholder:"请填写企业名称"},model:{value:e.authenticationForm.businessname,callback:function(t){e.$set(e.authenticationForm,"businessname",t)},expression:"authenticationForm.businessname"}})],1),a("el-form-item",{attrs:{label:"企业简称"}},[a("el-input",{attrs:{placeholder:"请填写企业简称"},model:{value:e.authenticationForm.abbrname,callback:function(t){e.$set(e.authenticationForm,"abbrname",t)},expression:"authenticationForm.abbrname"}})],1),a("el-form-item",{attrs:{label:"法人代表名称",prop:"corporname"}},[a("el-input",{attrs:{placeholder:"请输入法人姓名"},model:{value:e.authenticationForm.corporname,callback:function(t){e.$set(e.authenticationForm,"corporname",t)},expression:"authenticationForm.corporname"}})],1),a("el-form-item",{attrs:{label:"法人代表身份证",required:""}},[a("el-col",{attrs:{span:11}},[e.authenticationForm.frontimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.authenticationForm.frontimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px",opacity:"0","z-index":"5",height:"200px",width:"200px",cursor:"pointer"},attrs:{type:"file"},on:{change:function(t){return e.upload(t,"front")}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.authenticationForm.frontimageUrl,expression:"authenticationForm.frontimageUrl == ''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"110px"}},[e._v(" 正面 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.authenticationForm.frontimageUrl,expression:"authenticationForm.frontimageUrl != ''"}],staticStyle:{position:"absolute",left:"200px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.authenticationForm.frontimageUrl=""}}},[e._v(" 删除 ")])],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{position:"relative"},attrs:{span:11}},[e.authenticationForm.contraryimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.authenticationForm.contraryimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px",opacity:"0","z-index":"5",height:"200px",width:"200px",cursor:"pointer"},attrs:{type:"file"},on:{change:function(t){return e.upload(t,"contrary")}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.authenticationForm.contraryimageUrl,expression:"authenticationForm.contraryimageUrl == ''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"110px"}},[e._v(" 反面 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.authenticationForm.contraryimageUrl,expression:"authenticationForm.contraryimageUrl != ''"}],staticStyle:{position:"absolute",left:"190px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.authenticationForm.contraryimageUrl=""}}},[e._v(" 删除 ")])],1)],1),a("el-form-item",{attrs:{label:"注册地址",prop:"addr"}},[a("el-cascader",{attrs:{options:e.options,size:"large"},on:{change:e.handleModChange},model:{value:e.authenticationForm.addr,callback:function(t){e.$set(e.authenticationForm,"addr",t)},expression:"authenticationForm.addr"}})],1),a("el-form-item",{attrs:{label:"营业年限",prop:"businessduration"}},[a("el-select",{attrs:{placeholder:"请选择营业年限"},model:{value:e.authenticationForm.businessduration,callback:function(t){e.$set(e.authenticationForm,"businessduration",t)},expression:"authenticationForm.businessduration"}},[a("el-option",{attrs:{label:"初创企业",value:"1"}}),a("el-option",{attrs:{label:"1-3年",value:"2"}}),a("el-option",{attrs:{label:"3-5年",value:"3"}}),a("el-option",{attrs:{label:"5-10年",value:"4"}}),a("el-option",{attrs:{label:"10年以上",value:"5"}})],1)],1),a("el-form-item",{attrs:{label:"注册资金",prop:"registeredcapital"}},[a("el-input",{attrs:{placeholder:"请填写注册资金"},model:{value:e.authenticationForm.registeredcapital,callback:function(t){e.$set(e.authenticationForm,"registeredcapital",t)},expression:"authenticationForm.registeredcapital"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1),a("el-form-item",{attrs:{label:"企业描述"}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入企业描述信息",maxlength:"300","show-word-limit":""},model:{value:e.authenticationForm.businessdesc,callback:function(t){e.$set(e.authenticationForm,"businessdesc",t)},expression:"authenticationForm.businessdesc"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"企业英文名称"}},[a("el-input",{attrs:{placeholder:"请输入企业英文名称"},model:{value:e.authenticationForm.englishname,callback:function(t){e.$set(e.authenticationForm,"englishname",t)},expression:"authenticationForm.englishname"}})],1),a("el-form-item",{attrs:{label:"统一社会信用代码",prop:"creditcode"}},[a("el-input",{attrs:{placeholder:"请输入社会信用代码"},model:{value:e.authenticationForm.creditcode,callback:function(t){e.$set(e.authenticationForm,"creditcode",t)},expression:"authenticationForm.creditcode"}})],1),a("el-form-item",{attrs:{label:"法人代表身份证号",prop:"identity"}},[a("el-input",{attrs:{placeholder:"请输入法人身份证号码（18位）"},model:{value:e.authenticationForm.identity,callback:function(t){e.$set(e.authenticationForm,"identity",t)},expression:"authenticationForm.identity"}})],1),a("el-form-item",{attrs:{label:"企业营业执照",required:""}},[e.authenticationForm.businesslicense?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.authenticationForm.businesslicense}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"300px",height:"200px"}}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px",opacity:"0","z-index":"5",height:"200px",width:"200px",cursor:"pointer"},attrs:{type:"file"},on:{change:function(t){return e.upload(t,"business")}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.authenticationForm.businesslicense,expression:"authenticationForm.businesslicense == ''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"100px"}},[e._v(" 企业营业执照 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.authenticationForm.businesslicense,expression:"authenticationForm.businesslicense != ''"}],staticStyle:{position:"absolute",left:"200px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.authenticationForm.businesslicense=""}}},[e._v(" 删除 ")])],1),a("el-form-item",{attrs:{label:"街道地址",prop:"roadress"}},[a("el-input",{attrs:{placeholder:"请填写企业街道地址"},model:{value:e.authenticationForm.roadress,callback:function(t){e.$set(e.authenticationForm,"roadress",t)},expression:"authenticationForm.roadress"}})],1),a("el-form-item",{attrs:{label:"企业规模"}},[a("el-select",{attrs:{placeholder:"请选择企业规模"},model:{value:e.authenticationForm.region,callback:function(t){e.$set(e.authenticationForm,"region",t)},expression:"authenticationForm.region"}},[a("el-option",{attrs:{label:"10人以下",value:"1"}}),a("el-option",{attrs:{label:"11-50人",value:"2"}}),a("el-option",{attrs:{label:"50-100人",value:"3"}}),a("el-option",{attrs:{label:"101-500人",value:"4"}}),a("el-option",{attrs:{label:"501-1000人",value:"5"}}),a("el-option",{attrs:{label:"1000人以上",value:"6"}})],1)],1),a("el-form-item",{attrs:{label:"经营范围",prop:"businessscope"}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入企业经营范围信息",maxlength:"300","show-word-limit":""},model:{value:e.authenticationForm.businessscope,callback:function(t){e.$set(e.authenticationForm,"businessscope",t)},expression:"authenticationForm.businessscope"}})],1)],1)])],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{type:"primary"},on:{click:function(t){return e.next(2)}}},[e._v(" 提交,下一步 ")]),a("el-button",{attrs:{type:"info"}},[e._v("取消")])],1)],1)],1):e._e(),2==e.active?a("div",{staticClass:"empowerthird"},[a("el-divider",[e._v("企业认证")]),a("el-form",{ref:"authenticationPreviewFormRef",attrs:{model:e.authenticationPreviewForm,rules:e.formrules,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"企业名称",prop:"businessname"}},[a("el-input",{attrs:{placeholder:"请填写企业名称",readonly:""},model:{value:e.authenticationPreviewForm.businessname,callback:function(t){e.$set(e.authenticationPreviewForm,"businessname",t)},expression:"authenticationPreviewForm.businessname"}})],1),a("el-form-item",{attrs:{label:"企业简称",prop:"abbrname"}},[a("el-input",{attrs:{placeholder:"请填写企业简称",readonly:""},model:{value:e.authenticationPreviewForm.abbrname,callback:function(t){e.$set(e.authenticationPreviewForm,"abbrname",t)},expression:"authenticationPreviewForm.abbrname"}})],1),a("el-form-item",{attrs:{label:"法人代表名称",prop:"corporname"}},[a("el-input",{attrs:{placeholder:"请输入法人姓名",readonly:""},model:{value:e.authenticationPreviewForm.corporname,callback:function(t){e.$set(e.authenticationPreviewForm,"corporname",t)},expression:"authenticationPreviewForm.corporname"}})],1),a("el-form-item",{attrs:{label:"法人代表身份证",required:""}},[a("el-col",{attrs:{span:11}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"/iotapi/upload"}},[e.authenticationPreviewForm.frontimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.authenticationPreviewForm.frontimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"80px"}},[e._v(" 身份证正面 ")])])],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{position:"relative"},attrs:{span:11}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"/iotapi/upload"}},[e.authenticationPreviewForm.contraryimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.authenticationPreviewForm.contraryimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"80px"}},[e._v(" 身份证正反面 ")])])],1)],1),a("el-form-item",{attrs:{label:"注册地址",prop:"addr"}},[a("el-cascader",{attrs:{options:e.options,size:"large",readonly:""},on:{change:e.handleModChange},model:{value:e.authenticationPreviewForm.addr,callback:function(t){e.$set(e.authenticationPreviewForm,"addr",t)},expression:"authenticationPreviewForm.addr"}})],1),a("el-form-item",{attrs:{label:"营业年限",prop:"businessduration"}},[a("el-select",{attrs:{placeholder:"请选择营业年限",readonly:""},model:{value:e.authenticationPreviewForm.businessduration,callback:function(t){e.$set(e.authenticationPreviewForm,"businessduration",t)},expression:"authenticationPreviewForm.businessduration"}},[a("el-option",{attrs:{label:"初创企业",value:"1"}}),a("el-option",{attrs:{label:"1-3年",value:"2"}}),a("el-option",{attrs:{label:"3-5年",value:"3"}}),a("el-option",{attrs:{label:"5-10年",value:"4"}}),a("el-option",{attrs:{label:"10年以上",value:"5"}})],1)],1),a("el-form-item",{attrs:{label:"注册资金",prop:"registeredcapital"}},[a("el-input",{attrs:{placeholder:"请填写注册资金",readonly:""},model:{value:e.authenticationPreviewForm.registeredcapital,callback:function(t){e.$set(e.authenticationPreviewForm,"registeredcapital",t)},expression:"authenticationPreviewForm.registeredcapital"}})],1),a("el-form-item",{attrs:{label:"企业描述",prop:"businessdesc"}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入企业描述信息",maxlength:"300","show-word-limit":"",readonly:""},model:{value:e.authenticationPreviewForm.businessdesc,callback:function(t){e.$set(e.authenticationPreviewForm,"businessdesc",t)},expression:"authenticationPreviewForm.businessdesc"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"企业英文名称",prop:"englishname"}},[a("el-input",{attrs:{placeholder:"请输入企业英文名称",readonly:""},model:{value:e.authenticationPreviewForm.englishname,callback:function(t){e.$set(e.authenticationPreviewForm,"englishname",t)},expression:"authenticationPreviewForm.englishname"}})],1),a("el-form-item",{attrs:{label:"统一社会信用代码",prop:"creditcode"}},[a("el-input",{attrs:{placeholder:"请输入社会信用代码",readonly:""},model:{value:e.authenticationPreviewForm.creditcode,callback:function(t){e.$set(e.authenticationPreviewForm,"creditcode",t)},expression:"authenticationPreviewForm.creditcode"}})],1),a("el-form-item",{attrs:{label:"法人代表身份证号",prop:"identity"}},[a("el-input",{attrs:{placeholder:"请输入法人身份证号码（18位）",readonly:""},model:{value:e.authenticationPreviewForm.identity,callback:function(t){e.$set(e.authenticationPreviewForm,"identity",t)},expression:"authenticationPreviewForm.identity"}})],1),a("el-form-item",{attrs:{label:"企业营业执照",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"/iotapi/upload"}},[e.authenticationPreviewForm.businesslicense?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.authenticationPreviewForm.businesslicense}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"80px"}},[e._v(" 企业营业执照 ")])])],1),a("el-form-item",{attrs:{label:"街道地址",prop:"roadress"}},[a("el-input",{attrs:{placeholder:"请填写企业街道地址",readonly:""},model:{value:e.authenticationPreviewForm.roadress,callback:function(t){e.$set(e.authenticationPreviewForm,"roadress",t)},expression:"authenticationPreviewForm.roadress"}})],1),a("el-form-item",{attrs:{label:"企业规模"}},[a("el-select",{attrs:{placeholder:"请选择企业规模",readonly:""},model:{value:e.authenticationPreviewForm.region,callback:function(t){e.$set(e.authenticationPreviewForm,"region",t)},expression:"authenticationPreviewForm.region"}},[a("el-option",{attrs:{label:"10人以下",value:"1"}}),a("el-option",{attrs:{label:"11-50人",value:"2"}}),a("el-option",{attrs:{label:"50-100人",value:"3"}}),a("el-option",{attrs:{label:"101-500人",value:"4"}}),a("el-option",{attrs:{label:"501-1000人",value:"5"}}),a("el-option",{attrs:{label:"1000人以上",value:"6"}})],1)],1),a("el-form-item",{attrs:{label:"经营范围",prop:"businessscope"}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入企业经营范围信息",maxlength:"300",readonly:"","show-word-limit":""},model:{value:e.authenticationPreviewForm.businessscope,callback:function(t){e.$set(e.authenticationPreviewForm,"businessscope",t)},expression:"authenticationPreviewForm.businessscope"}})],1)],1)])],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{type:"primary"},on:{click:e.addEmpower}},[e._v(" 提交审核 ")]),a("el-button",{attrs:{type:"info"},on:{click:e.goBack}},[e._v("返回上一步")])],1)],1):e._e()],1):e._e(),2==e.allactive?a("div",[a("el-steps",{attrs:{active:e.laboratoryactive,simple:""}},[a("el-step",{attrs:{title:"填写实验室信息",icon:"el-icon-s-promotion"}}),a("el-step",{attrs:{title:"预览提交审核",icon:"el-icon-upload"}})],1),1==e.laboratoryactive?a("div",{staticClass:"block",staticStyle:{padding:"30px","box-sizing":"border-box"}},[a("p",{staticStyle:{border:"1px solid #cccccc","font-size":"20px",height:"40px","line-height":"40px",margin:"0","padding-left":"20px"}},[e._v(" 企业实验室认证 ")]),a("div",{staticClass:"blocktop",staticStyle:{"margin-top":"20px"}},[a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":e.removeTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addTab(e.editableTabsValue)}}},[e._v(" 新增 ")]),e._l(e.editableTabs,(function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[a("LaboratoryForm",{on:{resultes:e.getLaboratory}})],1)}))],2),a("div",{staticStyle:{"text-align":"center"}},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.previewLaboratory}},[e._v(" 确定,预览 ")]),a("el-button",{attrs:{type:"info"}},[e._v("取消")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){e.allactive=1}}},[e._v("上一步")])],1)],1)],1)]):e._e(),2==e.laboratoryactive?a("div",[a("el-tabs",{attrs:{type:"card"},model:{value:e.laboratoryFormvalue,callback:function(t){e.laboratoryFormvalue=t},expression:"laboratoryFormvalue"}},e._l(e.laboratorylist,(function(e,t){return a("el-tab-pane",{key:e.laboratoryForm.name,attrs:{label:"实验室"+(t+1),name:e.laboratoryForm.name}},[a("Preview",{attrs:{"laboratory-form":e.laboratoryForm,otherform:e.otherslist}})],1)})),1),a("div",{staticStyle:{"text-align":"center"}},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.next(3)}}},[e._v("确定")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){e.laboratoryactive=1}}},[e._v(" 返回上一步 ")])],1)],1)],1):e._e()],1):e._e(),3==e.allactive?a("div",[a("div",{staticClass:"block",staticStyle:{margin:"0 auto","text-align":"center",padding:"30px"}},[a("el-image",[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("svg-icon",{staticStyle:{width:"8rem",height:"8rem"},attrs:{"icon-class":"empowerexamine"}})],1)]),a("p",{staticStyle:{"font-size":"25px",color:"#409eff"}},[e._v("正在审核中")]),a("p",{staticStyle:{"font-size":"20px"}},[e._v("审核员联系电话：17201202365")]),a("p",{staticStyle:{color:"#cccccc","font-size":"14px"}},[e._v(" 预计3到5个工作日完成，请耐心等待，谢谢您的配合和理解 ")]),a("p",[a("el-button",{attrs:{type:"primary"},on:{click:e.cancelAdd}},[e._v(" 填写新的企业资质 "),a("i",{staticClass:"el-icon-s-fold"})])],1)],1)]):e._e(),a("el-dialog",{attrs:{visible:e.dialogVisible,"before-close":e.handleClose,title:"其他资质添加",width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialogform"},[a("el-form",{ref:"addotherform",staticClass:"demo-addotherform",attrs:{model:e.addotherform,rules:e.otheformrule,"label-width":"120px"}},[a("el-row",[a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409eff","font-size":"14px"}},[e._v(" 其他证书 ")]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"证书编号",prop:"name"}},[a("el-input",{model:{value:e.addotherform.name,callback:function(t){e.$set(e.addotherform,"name",t)},expression:"addotherform.name"}})],1),a("el-form-item",{attrs:{label:"签发日期",prop:"dateOfIssue"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp"},model:{value:e.addotherform.dateOfIssue,callback:function(t){e.$set(e.addotherform,"dateOfIssue",t)},expression:"addotherform.dateOfIssue"}})],1),a("el-form-item",{attrs:{label:"初次认可",prop:"initialRecognition"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp"},model:{value:e.addotherform.initialRecognition,callback:function(t){e.$set(e.addotherform,"initialRecognition",t)},expression:"addotherform.initialRecognition"}})],1),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{attrs:{rows:8,type:"textarea",placeholder:"请输入证书资质信息"},model:{value:e.addotherform.desc,callback:function(t){e.$set(e.addotherform,"desc",t)},expression:"addotherform.desc"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"发证机关",prop:"licencsIssuing"}},[a("el-input",{model:{value:e.addotherform.licencsIssuing,callback:function(t){e.$set(e.addotherform,"licencsIssuing",t)},expression:"addotherform.licencsIssuing"}})],1),a("el-form-item",{attrs:{label:"有效期至",prop:"termOfValidity"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择有效期至","value-format":"timestamp"},model:{value:e.addotherform.termOfValidity,callback:function(t){e.$set(e.addotherform,"termOfValidity",t)},expression:"addotherform.termOfValidity"}})],1),a("el-form-item",{attrs:{label:"更新时间",prop:"updatedDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发更新时间","value-format":"timestamp"},model:{value:e.addotherform.updatedDate,callback:function(t){e.$set(e.addotherform,"updatedDate",t)},expression:"addotherform.updatedDate"}})],1),a("el-form-item",{attrs:{label:"证书电子文件",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"/iotapi/upload"}},[e.addotherform.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.addotherform.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"50px"}},[e._v(" 证书电子文件 ")])]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.addotherform.imgsrc,expression:"addotherform.imgsrc != ''"}],staticStyle:{position:"absolute",left:"200px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.addotherform.imgsrc=""}}},[e._v(" 删除 ")])],1)],1)])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateOther("addotherform")}}},[e._v(" 确 定 ")])],1)])],1)},i=[],s=(a("b0c0"),a("ac1f"),a("1276"),a("c19f"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f81"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("159b"),a("4de4"),a("23a5")),o=a("c5c9"),n=a("be65"),l=a.n(n),c=a("d324"),d=[],u={components:{LaboratoryForm:o["default"],Preview:c["default"]},data:function(){var e=function(e,t,a){var r=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;r.test(t)?a():18!=t.length?a(new Error("请输入18位身份证号")):a(new Error("需要输入正确身份证号码"))},t=function(e,t,a){var r=/^[a-zA-Z&.,\'\/\-\s]+$/g;r.test(t)?a():a(new Error("请输入英文名称"))},a=function(e,t,a){var r=/[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}/;r.test(t)?t.length>18?a(new Error("请输入18位统一社会编码")):a():a(new Error("请输入正确统一社会编码"))},r=function(e,t,a){var r=/^(([^0][0-9]+|0)\.([0-9]{1,2})$)|^(([^0][0-9]+|0)$)|^(([1-9]+)\.([0-9]{1,2})$)|^(([1-9]+)$)/;r.test(t)?a():a(new Error("请填写公司注册资金,精确2位小数"))};return{laboratoryactive:1,editableTabsValue:"1",laboratoryFormvalue:"1",editableTabs:[{title:"实验室1",name:"1",content:""}],tabIndex:1,allactive:1,active:1,authenticationForm:{name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:[],roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""},authenticationPreviewForm:{name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:[],roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""},options:s["regionData"],formrules:{identity:[{required:!0,message:"请输入正确身份证号",trigger:"blur"},{validator:e,trigger:"blur"}],businessname:[{required:!0,message:"请输入企业名称",trigger:"blur"}],abbrname:[{required:!0,message:"请输入企业简称",trigger:"blur"}],corporname:[{required:!0,message:"请输入法人姓名",trigger:"blur"}],englishname:[{required:!0,message:"请输入企业英文名称",trigger:"blur"},{validator:t}],creditcode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{validator:a}],addr:[{required:!0,message:"请选择公司注册地址",trigger:"change"}],roadress:[{required:!0,message:"请输入街道地址",trigger:"blur"}],registeredcapital:[{required:!0,message:"请输入公司注册资金",trigger:"blur"},{validator:r}],businessduration:[{required:!0,message:"请选择公司营业年限",trigger:"change"}],businessdesc:[{required:!0,message:"请输入企业描述信息",trigger:"blur"}],businessscope:[{required:!0,message:"请输入企业经营范围",trigger:"blur"}]},ruleForm:{cnasname:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",cnasimgsrc:"",cnasdesc:""},ruleformrulecma:{cmaname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],cmadateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],cmalicencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],cmatermOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},otherForm:{other:""},ruleRules:{cnasname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ruleRules2:{cmaname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],cmadateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],cmalicencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],cmatermOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ruleRules1:{cnasname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},dialogVisible:!1,addotherform:{name:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",imgsrc:"",desc:""},previewother:{otherform:[]},otheformrule:{name:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ewpowerid:"",laboratorylist:[],imgtype:""}},computed:{fileDomain:function(){return this.$getUrlPrefix(this.$Cookies.get("fileserver"))}},mounted:function(){},methods:{upload:function(e,t){if(this.imgtype=t,e){var a=e.target.files[0],r=a.name,i=e.target.files[0].type,s=(t=a.type.split("/")[0],"image/jpeg"===i||"image/JPEG"===i||"image/png"===i||"image/PNG"===i||"image/bpm"===i||"image/BPM"===i);if(!s)return this.$message({message:"请上传图片",type:"error"}),!1;var o=new FileReader;o.readAsDataURL(a);var n=this;o.onloadend=function(){var e=o.result,t=n.dataURItoBlob(e);n.uploadFile(t,r)}}},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return new Blob([r],{type:a})},uploadFile:function(e,t){var a=this,r=new FormData;r.append("file",e,t),r.append("output","json"),r.append("path",l.a.get("appids")),r.append("scene",l.a.get("appids")),r.append("auth_token",l.a.get("access_token_pump")),this.$http.post(l.a.get("fileserver"),r).then((function(e){e&&("front"==a.imgtype?a.authenticationForm.frontimageUrl=e.body.src:"contrary"==a.imgtype?a.authenticationForm.contraryimageUrl=e.body.src:"business"==a.imgtype&&(a.authenticationForm.businesslicense=e.body.src))})).catch((function(e){a.$message.error(e.bodyText)}))},addTab:function(e){var t=++this.tabIndex+"";this.editableTabs.push({title:"实验室"+this.tabIndex,name:t,content:"New Tab content"}),this.editableTabsValue=t},removeTab:function(e){var t=this.editableTabs,a=this.editableTabsValue;a===e&&t.forEach((function(r,i){if(r.name===e){var s=t[i+1]||t[i-1];s&&(a=s.name)}})),this.editableTabsValue=a,this.editableTabs=t.filter((function(t){return t.name!==e}))},tagGoIndex:function(e){this.isshowactive=e},addTag:function(){this.dynamicTags.push("实验室")},next:function(e){var t=this;this.active=e,this.allactive=e,2==e?this.$refs.formrules.validate((function(e){if(!e)return t.$message.error("有必填项未填写"),!1;""!=t.authenticationForm.frontimageUrl?""!=t.authenticationForm.contraryimageUrl?""!=t.authenticationForm.businesslicense?t.authenticationPreviewForm=t.authenticationForm:t.$message.error("请上传企业营业执照"):t.$message.error("请上传身份证背面照"):t.$message.error("请上传身份证正面照")})):this.uploadFrom()},beforeAvatarUpload1:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},beforeAvatarUpload2:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},handleClose:function(){this.dialogVisible=!1},updateOther:function(e){var t=this;this.$refs[e].validate((function(a){if(a){if(""==t.addotherform.imgsrc)return void t.$message.error("请上传资质照片");var r={title:t.otherForm.other,name:t.addotherform.name,dateOfIssue:t.addotherform.dateOfIssue,updatedDate:t.addotherform.updatedDate,initialRecognition:t.addotherform.initialRecognition,termOfValidity:t.addotherform.termOfValidity,licencsIssuing:t.addotherform.licencsIssuing,imgsrc:t.addotherform.imgsrc,desc:t.addotherform.desc};d.push(r),t.$refs[e].resetFields(),t.addotherform.imgsrc="",t.dialogVisible=!1}}))},addOther:function(){""==this.otherForm.other?this.$message.warning("请填写其他资质名称"):this.dialogVisible=!0},goBack:function(){this.active>1&&this.active<=3&&this.active--},handleModChange:function(e){},addEmpower:function(){this.authenticationPreviewForm=this.authenticationForm,this.$message.success("提交成功"),this.allactive++},cancelAdd:function(){this.initData(),this.allactive=1,this.active=1},initData:function(){this.authenticationForm={name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:[],roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""},this.authenticationPreviewForm={name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:"",roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""}},getLaboratory:function(e){this.laboratorylist.push(e)},previewLaboratory:function(){0!=this.laboratorylist.length?(this.laboratoryFormvalue=this.laboratorylist[0].laboratoryForm.name,this.laboratoryactive=2):this.$message.error("请至少提交一个实验室认证")},uploadFrom:function(){var e=this,t=this.$store.state.user.roles[0]["name"],a=this.$store.state.user["name"];if(t){var r="role:"+t,i={};this.ruleForm.laboratorylist=this.laboratorylist;var s={authenticationForm:this.authenticationPreviewForm,ruleForm:this.ruleForm};i[r]={read:!0,write:!0},this.$axiosWen.post("classes/Dict",{ACL:i,type:"Enterprise-qualification",data:s,key:a}).then((function(t){t&&e.$message({type:"success",message:"提交成功"})})).catch((function(t){e.$message({type:"error",message:"提交失敗"})}))}else this.$message({message:"未获取到角色名"})}}},m=u,p=(a("568d"),a("f63d"),a("2877")),f=Object(p["a"])(m,r,i,!1,null,"01a8b3ec",null);t["default"]=f.exports},"0a7c":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"0b2e":function(e,t,a){},"0ccd":function(e,t,a){"use strict";a("41b5")},"0d8b":function(e,t,a){},"0ee5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("div",{staticClass:"modelmanamge"},[a("div",{staticClass:"mdoeltop"},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:12}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:e.$translateTitle("developer.qualityinspectionitems"),"label-width":"100"}},[a("el-input",{attrs:{clearable:"",placeholder:e.$translateTitle("product.enter1")+e.$translateTitle("product.itemname")},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:0==e.formInline.name.length},on:{click:function(t){return e.searchProduct(e.formInline.name)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.search"))+" ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addStandard}},[e._v(" "+e._s(e.$translateTitle("product.newlyadded"))+e._s(e.$translateTitle("developer.qualityinspectionitems"))+" ")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{plain:"",type:"primary",size:"small"},on:{click:e.getIotHubProduct}},[e._v(" "+e._s(e.$translateTitle("product.Viewtheplatform"))+" ")])],1)])],1)],1),a("div",{staticClass:"tableblock"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableDataReport,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"index",label:e.$translateTitle("equipment.serialnumber"),align:"center",width:"120"}}),a("el-table-column",{attrs:{label:"ID",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.itemname"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("rule.Type"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.devType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.Associationdictionary"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"warning"},on:{click:function(a){return e.goDict(t.row.config.dictid)}}},[e._v(" "+e._s(t.row.config.dictid)+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.Inspectionstandardmanagement"),align:"center",width:400},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.detailReportChildren(t.row,"delete")}}},[e._v(" "+e._s(e.$translateTitle("task.Delete"))+" ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.detailReportChildren(t.row,"template")}}},[e._v(" "+e._s(e.$translateTitle("developer.Templatemanagement"))+" ")]),a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(a){return e.productView(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.mapping"))+" ")])]}}])})],1)],1),a("div",{staticClass:"pageblock"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.pagesize,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:e.dialogVisible,title:e.$translateTitle("developer.Inspectionandqualityinspectionitems"),width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"addContent"},[a("el-form",{ref:"reportForm",attrs:{rules:e.rules,model:e.reportForm}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"name","label-width":e.formLabelWidth,label:e.$translateTitle("developer.Reporttemplatedictionary")}},[a("el-select",{attrs:{placeholder:e.$translateTitle("task.Select")},on:{change:e.changev},model:{value:e.reportForm.value,callback:function(t){e.$set(e.reportForm,"value",t)},expression:"reportForm.value"}},e._l(e.dictoptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.key,value:e.objectId}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"name","label-width":e.formLabelWidth,label:e.$translateTitle("developer.Reporttemplatename")}},[a("el-input",{attrs:{placeholder:""},model:{value:e.reportForm.name,callback:function(t){e.$set(e.reportForm,"name",t)},expression:"reportForm.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"devTypeText","label-width":e.formLabelWidth,label:e.$translateTitle("developer.Reporttemplatename")}},[a("el-input",{attrs:{placeholder:""},model:{value:e.reportForm.devTypeText,callback:function(t){e.$set(e.reportForm,"devTypeText",t)},expression:"reportForm.devTypeText"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:1}}),a("el-col",{attrs:{span:2}},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v(" "+e._s(e.$translateTitle("developer.datafile"))+" ")])]),a("el-col",{attrs:{span:4}},[e.selected_file&&e.selected_file.src?a("p",{staticStyle:{"font-weight":"bold","text-align":"center"}},[e._v(" "+e._s(e.selected_file.name)+" ")]):e._e()]),a("el-col",{attrs:{span:4}},[a("div",[a("label",{staticClass:"img-uploader-label",attrs:{for:"inputId"}}),a("input",{ref:"input",staticStyle:{display:"none"},attrs:{id:"inputId",type:"file",accept:"*.pdf, *.doc"},on:{change:function(t){return e.file_selected(t)}}})])])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addReporttemp("reportForm")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),a("el-dialog",{attrs:{visible:e.dialogChildrenForm,title:e.$translateTitle("developer.Newstandardtemplate"),width:"30%"},on:{"update:visible":function(t){e.dialogChildrenForm=t}}},[a("el-form",{ref:"childrenFormRef",attrs:{model:e.childrenform}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:e.$translateTitle("developer.Templatename")}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.childrenform.name,callback:function(t){e.$set(e.childrenform,"name",t)},expression:"childrenform.name"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:e.$translateTitle("developer.Templatemodel")}},[e.childrenform.imageSrc?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.childrenform.imageSrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-100px","z-index":"5",width:"100px",height:"100px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})])]),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:e.$translateTitle("menu.sort")}},[a("el-input-number",{attrs:{min:1,autocomplete:"off"},model:{value:e.childrenform.index,callback:function(t){e.$set(e.childrenform,"index",t)},expression:"childrenform.index"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogChildrenForm=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addStandardChildren}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogTableVisible,title:e.$translateTitle("product.Template"),top:"5vh"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.producttable}},[a("el-table-column",{attrs:{label:e.$translateTitle("equipment.serialnumber"),type:"index",align:"center",width:"130"}}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.name"),align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("concentrator.content"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{"z-index":"9999",width:"100px",height:"100px"},attrs:{src:e.row.config.konva.Stage.children[0].children[0].attrs.source,"preview-src-list":[""+e.row.config.konva.Stage.children[0].children[0].attrs.source]}})]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.Templatemanagement1"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.productView(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.mapping"))+" ")]),a("el-button",{attrs:{type:"删除",size:"small"},on:{click:function(a){return e.deleteProduct(t.row)}}},[e._v(" "+e._s(e.$translateTitle("task.Delete"))+" ")])]}}])})],1),a("div",{staticClass:"pageblock"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.productpagesize,total:e.producttotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleProductSize,"current-change":e.handleProductChange}})],1)],1),a("el-dialog",{attrs:{visible:e.iotHubDialogShow,title:e.$translateTitle("product.platformlist"),top:"5vh"},on:{"update:visible":function(t){e.iotHubDialogShow=t}}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.iotHubProductList,stripe:""}},[a("el-table-column",{attrs:{label:e.$translateTitle("equipment.serialnumber"),type:"index",width:150}}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.name"),prop:"name"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.describe"),prop:"desc"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.Networktype"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["CELLULAR"==t.row.netType?a("span",[e._v(" "+e._s(e.$translateTitle("product.honeycomb"))+"(2G/3G/4G) ")]):"WIFI"==t.row.netType?a("span",[e._v("WiFi")]):"ETHERNET"==t.row.netType?a("span",[e._v(" "+e._s(e.$translateTitle("product.ethernet"))+" ")]):"LORA"==t.row.netType?a("span",[e._v("LoRaWAN")]):a("span",[e._v(e._s(t.row.netType))])]}}])})],1),a("p",[a("br")])],1)],1)])],1)},i=[],s=a("1da1"),o=(a("4de4"),a("b0c0"),a("159b"),a("96cf"),a("dcc6")),n=a("7212"),l=a("5652"),c=a("e0e9"),d=a("58dd"),u={name:"ModelManamge",components:{},data:function(){return{rules:{value:[{type:"string",required:!0,message:"请选择报告模板",trigger:"change"}],client:[{type:"array",required:!0,message:"请选择适用产品",trigger:"change"}],name:[{required:!0,message:"请填写报告模板名称",trigger:"blur"}],devTypeText:[{required:!0,message:"请填写报告模版类型",trigger:"blur"}]},arrlist:{},dictoptions:[],value:"",action:"http://file.iotn2n.com/shapes/upload",pumpmodel:["离心泵","潜水泵","混流泵","螺杆泵","轴流泵","旋涡泵","电动泵","蒸汽泵","齿轮泵","罗茨泵","滑片泵","喷射泵","升液泵","电磁泵"],standard:[{label:"国际标准",value:"ITBZ"},{label:"国家标准",value:"GJBZ"},{label:"行业标准",value:"HYBZ"},{label:"企业标准",value:"QYBZ"},{label:"地方标准",value:"DFBZ"},{label:"其他标准",value:"OTHER"}],ipaddr:"",formLabelWidth:"120px",dialogVisible:!1,formInline:{name:""},pagesize:10,start:0,total:0,tableDataReport:[],reportForm:{name:"",product:"",model:"",file:"",nodeType:"",devTypeText:"",word:"",client:[]},childrenform:{name:"",imageSrc:"",index:1},dialogChildrenForm:!1,dialogTableVisible:!1,producttable:[],productpagesize:10,producttotal:0,productstart:0,file:"",productListForReport:[],currentProduct:{},currentItemCount:0,selected_file:{},iotHubProductList:[],iotHubDialogShow:!1}},computed:{fileDomain:function(){return"http://file.iotn2n.com"}},mounted:function(){this.quertDict(),this.getReport()},methods:{goDict:function(e){this.$router.push({path:"/dashboard/dict",query:{dictid:e,type:"device"}})},quertDict:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={order:"-createdAt",limit:10,skip:0,where:{"data.cType":"report_type"}},t.next=3,Object(c["getDictCount"])(a);case 3:r=t.sent,i=r.results,s=void 0===i?[]:i,e.dictoptions=s;case 7:case"end":return t.stop()}}),t)})))()},changev:function(e){var t=this.dictoptions.filter((function(t){return t.objectId==e}));this.arrlist=t[0]},getIotHubProduct:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$loading({background:"rgba(0, 0, 0, 0.5)"}),r={where:{category:"IotHub"},order:"-updatedAt"},t.next=4,Object(n["queryProduct"])(r);case 4:i=t.sent,s=i.results,o=void 0===s?[]:s,a.close(),e.iotHubDialogShow=!0,e.iotHubProductList=o;case 10:case"end":return t.stop()}}),t)})))()},getReport:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={skip:e.start,limit:e.pagesize,where:{"config.identifier":"inspectionReportTemp",desc:"0"},order:"-updatedAt"},t.next=3,Object(n["queryProduct"])(a);case 3:r=t.sent,i=r.results,s=void 0===i?[]:i,e.tableDataReport=s,e.productListForReport=s;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.pagesize=e,this.getReport()},handleCurrentChange:function(e){this.start=(e-1)*this.pagesize,this.getReport()},handleProductSize:function(e){this.productpagesize=e,this.detailReportChildren(this.currentProduct)},handleProductChange:function(e){this.start=(e-1)*this.pagesize,this.detailReportChildren(this.currentProduct)},file_selected:function(e){var t=e.target.files[0],a=/.*(.doc|.docx)$/;a.test(t.name)?(this.fileRead(t),this.reportForm.file=t):this.$message({type:"error",message:"只允许上传后缀为doc,docx的文件"})},uploadDocx:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("file",e),t.next=4,Object(l["fileUpload"])(a);case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))()},fileRead:function(e){var t=new FileReader,a=this;t.vue=this,t.readAsDataURL(e),t.onload=function(){a.selected_file=e,a.selected_file.src=this.result}},addStandard:function(){this.dialogVisible=!0},searchProduct:function(e){},addReporttemp:function(e){var t=this,a=JSON.stringify({identifier:"inspectionReportTemp",dictid:this.arrlist.objectId}),r=new FormData;r.append("name",this.reportForm.name),r.append("devType",this.reportForm.devTypeText),r.append("config",a),r.append("file",this.reportForm.file),this.$refs[e].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=9;break}return e.next=3,Object(d["cereteReport"])(r);case 3:i=e.sent,s=i.result,o=i.error,s?(t.$message({type:"success",message:"报告创建成功!"}),t.$refs["reportForm"].resetFields(),t.dialogVisible=!1,t.getReport()):t.$message({type:"error",message:"报告创建失败".concat(o)}),e.next=10;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addReport:function(e){var t={};if(this.selected_file&&this.selected_file.size){var a=new FormData,r={identifier:"inspectionReportTemp",client:this.reportForm.client};a.append("devType",this.reportForm.devTypeText),a.append("name",this.reportForm.name),a.append("config",JSON.stringify(r)),a.append("file",this.selected_file),this.postReportTemp(a)}else t={config:{identifier:"inspectionReportTemp",name:"组态",client:this.reportForm.client},desc:String(0),devType:this.reportForm.devTypeText,name:this.reportForm.name,nodeType:1,category:"Evidence"},this.putReportTemp("gatewayFlag",t)},postReportTemp:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 4:r=e.sent,a.close(),r&&(response?(t.$message({type:"success",message:"创建成功"}),t.$refs["reportForm"].resetFields(),t.dialogVisible=!1,t.getReport()):t.$message({type:"error",message:"创建失败}"}));case 7:case"end":return e.stop()}}),e)})))()},putReportTemp:function(e,t){var a=this;Object(d["putReportFile"])(t).then((function(t){t&&("deviceFlag"==e?(a.$message({type:"success",message:"新增成功"}),a.$refs["childrenFormRef"].resetFields(),a.dialogChildrenForm=!1):(a.$message({type:"success",message:"创建成功"}),a.$refs["reportForm"].resetFields(),a.dialogVisible=!1),a.getReport())}))},addStandardChildren:function(){if(""!=this.childrenform.imageSrc){var e={config:{name:"组态",client:this.reportForm.client,layer:{width:600,height:850,backColor:"#eee",backgroundImage:this.childrenform.imageSrc,widthHeightRatio:""},deviceid:"",components:[],index:this.childrenform.index},icon:this.childrenform.imageSrc,nodeType:0,desc:String(this.currentItemCount+1),devType:this.currentDevType,name:this.childrenform.name,category:"Evidence"};this.putReportTemp("deviceFlag",e)}else this.$message("请上传模版图片")},detailReportChildren:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var i,s,l,c,d,u,m;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.currentProduct=e,i={"config.id":e.objectId},s={limit:a.productpagesize,skip:a.productstart,keys:"count(*)",where:JSON.stringify(i),order:"createdAt"},r.next=5,Object(n["queryProduct"])(s);case 5:l=r.sent,c=l.count,d=void 0===c?0:c,u=l.results,a.producttable=u,a.producttotal=d,"template"==t?a.dialogTableVisible=!0:(m=[],u.forEach((function(e){m.push({method:"DELETE",path:"/classes/Product/".concat(e.objectId),body:{}})})),Object(o["batch"])(m).then((function(e){})).catch((function(e){})),a.$message({type:"success",message:"删除成功!"}),a.getReport());case 12:case"end":return r.stop()}}),r)})))()},deleteImgsrc:function(){event.stopPropagation(),this.childrenform.imageSrc=""},productView:function(e){this.$router.push({path:"/Topo/VueKonva",query:{productid:e,type:"product"}})},deleteProduct:function(e){var t=this;this.$confirm("确定要删除吗?","提示",{confirmButtonText:"删除",cancelButtonText:"取消"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(n["delProduct"])(e.objectId);case 2:a.sent,t.$message({type:"success",message:"删除成功"}),t.detailReportChildren(t.currentProduct);case 5:case"end":return a.stop()}}),a)}))))},upload:function(e,t){if(e){var a=e.target.files[0],r=a.name;e.target.files[0].type;this.imgtype=t,this.uploadFile(a,r)}},submitUpload:function(e){this.$refs.input},uploadFile:function(e,t){var a=this,r=new FormData;r.append("file",e),r.append("output","json"),r.append("path",Cookies.get("appids")),r.append("scene",Cookies.get("appids")),r.append("auth_token",Cookies.get("access_token_pump"));this.$http.post(Cookies.get("fileserver"),r).then((function(e){e&&(a.childrenform.imageSrc=e.body.src)}))}}},m=u,p=(a("4813"),a("17d3"),a("2877")),f=Object(p["a"])(m,r,i,!1,null,"e956a21c",null);t["default"]=f.exports},1653:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"PerformanceCurve"},[a("div",{ref:"chartViewTop",staticClass:"view-chart-box"},[e._v("Click to bind data.")])])},i=[],s=a("5530"),o=a("164e"),n=a.n(o),l=a("5880"),c=a("eb2f"),d={name:"PerformanceCurve",components:{},data:function(){return{pageId:"",chart:"",wenTimer:"",chartOption:{},xAxisDataArray:[],flowArray:[],headArray:[],effectArray:[],powerArray:[],evidenceDataBackUp:[],mqttClient:{}}},computed:Object(s["a"])({factoryName:function(){return this.$store.state.SMHuser.factoryName}},Object(l["mapState"])({currentTask:function(e){return e.deviceData.currentTask},currentChildPageData:function(e){return e.deviceData.currentChildPageData}})),created:function(){var e="paho_mqtt_javascript11";this.mqttClient=new Paho.MQTT.Client(this.$globalConfig.hostname,this.$globalConfig.mqttPort,e),this.mqttClient.onConnectionLost=this.onConnectionLost,this.mqttClient.onMessageArrived=this.onMessageArrived,this.mqttClient.connect({onSuccess:this.onConnect})},mounted:function(){var e=this;c["eventBus"].$on("childPageChange",(function(t){e.resetOption(),e.pageId=t,setTimeout((function(){e.drawLine(),e.getData()}),200)})),this.$nextTick((function(){var t=e.$refs.chartViewTop;e.chartTop=n.a.init(t),e.chartTop.on("click",e.dataTransfer),e.chartTop.on("dataZoom",e.dataTransfer),e.drawLine()}))},beforeDestroy:function(){c["eventBus"].$off("childPageChange")},methods:{onConnect:function(e){this.mqttClient.subscribe("World");var t=new Paho.MQTT.Message("Hello 11");t.destinationName="World",this.mqttClient.send(t)},onConnectionLost:function(e){},onMessageArrived:function(e){},drawLine:function(){this.chartOption={title:{text:"时间-性能"},tooltip:{trigger:"axis"},dataZoom:{show:!0,start:0,end:50,throttle:500,backgroundColor:"#fff",dataBackgroundColor:"#FF0000",fillerColor:"rgba(144,197,237,0.2)",handleColor:"rgba(70,130,180,1)"},legend:{data:["流量","扬程","效率","功率"]},calculable:!0,xAxis:[{type:"category",data:this.xAxisDataArray}],yAxis:[{type:"value",name:"H/m",position:"left",axisLabel:{formatter:"{value}  H/m"}},{type:"value",name:"P(kW)",position:"left",offset:50,axisLabel:{formatter:"{value}"}},{type:"value",name:"η(%)",position:"right",axisLabel:{formatter:"{value}"}}],series:[{name:"流量",type:"line",smooth:!0,data:this.flowArray},{name:"扬程",type:"line",smooth:!0,data:this.headArray},{name:"效率",type:"line",smooth:!0,data:this.effectArray},{name:"功率",type:"line",smooth:!0,data:this.powerArray}]},this.chartTop.setOption(this.chartOption)},dataTransfer:function(e){switch(e.type){case"click":var t=this.evidenceDataBackUp[e.dataIndex];c["eventBus"].$emit("chartClick",t);break;case"datazoom":break;default:break}},getData:function(){var e=this;this.pageId?this.currentTask.createdAt?this.getEvidence(this.pageId).then((function(t){if(t){var a=t.results;e.pushData(a)}})):this.$router.push({path:"/inspection/index"}):this.$message({message:"没有 id"})},pushData:function(e){for(var t=e.length-1;t>=0;t--){var a=e[t];this.evidenceDataBackUp.push(a);var r=this.$timestampToTime(a.timestamp,!0);this.xAxisDataArray.push(r),this.flowArray.push(this.$objGet(a,"original.data.flow")),this.headArray.push(this.$objGet(a,"original.data.head")),this.effectArray.push(this.$objGet(a,"original.data.effect")),this.powerArray.push(this.$objGet(a,"original.data.power"))}this.chartTop.setOption(this.chartOption,!0)},getTimeStamp:function(e){if("startTime"==e){var t=this.chartTop.getModel().option.dataZoom[0].startValue,a=this.chartTop.getModel().option.xAxis[0].data[t];return a}if("endTime"==e){var r=this.chartTop.getModel().option.dataZoom[0].endValue,i=this.chartTop.getModel().option.xAxis[0].data[r];return this.$dateTostamp(i)}},getEvidence:function(e){var t={},a=this.$dateTostamp(this.currentTask.createdAt);return t["reportId"]=e,t["timestamp"]={$gt:a},this.$axiosWen.get("/classes/Evidence",{params:{order:"-timestamp",limit:"300",where:JSON.stringify(t),keys:"original,timestamp,count(*)"}})},evidenceDetail:function(){this.$route.query.taskid;this.$axios.get("/classes/Evidence",{params:{order:"-createdAt",include:"product",where:{parentId:{$exists:!1}}}})},resetOption:function(){this.chartTop.clear(),this.xAxisDataArray=[],this.flowArray=[],this.headArray=[],this.effectArray=[],this.powerArray=[]}}},u=d,m=(a("de5c"),a("2877")),p=Object(m["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},1747:function(e,t,a){"use strict";a("76a5")},"17d3":function(e,t,a){"use strict";a("0d8b")},"1bbe":function(e,t,a){},"1d8d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"standard"},[a("div",{staticClass:"devicesright",staticStyle:{padding:"20px"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"标准类型"}},[a("el-select",{attrs:{placeholder:"选择标准类型"},model:{value:e.formInline.model,callback:function(t){e.$set(e.formInline,"model",t)},expression:"formInline.model"}},[a("el-option",{attrs:{label:"性能检测",value:"性能检测"}})],1)],1),a("el-form-item",{attrs:{label:"标准类别"}},[a("el-select",{attrs:{placeholder:"选择标准类别"},model:{value:e.formInline.standard,callback:function(t){e.$set(e.formInline,"standard",t)},expression:"formInline.standard"}},e._l(e.standard,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"检测名称"}},[a("el-input",{attrs:{placeholder:"请输入检测名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getStandardFromDict(0)}}},[e._v(" 查询 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.reset}},[e._v("重置")])],1)],1),a("div",{staticClass:"adddevices"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addStandard}},[e._v(" 新增检测标准 ")])],1),a("div",{staticClass:"tableblock"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.standardList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{label:"检测标准名称",prop:"data.name",width:"200"}}),a("el-table-column",{attrs:{label:"标准类型",prop:"data.model"}}),a("el-table-column",{attrs:{label:"适用产品",prop:"data.product",width:"200"}}),a("el-table-column",{attrs:{label:"标准类别",prop:"data.standard",width:"200"}}),a("el-table-column",{attrs:{label:"标准发行单位",prop:"data.client",width:"250"}}),a("el-table-column",{attrs:{label:"标准发行时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$timestampToTime(t.row.data.start_time)))])]}}])}),a("el-table-column",{attrs:{label:"备注",width:"220",prop:"data.desc"}}),a("el-table-column",{attrs:{label:"创建时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$timestampToTime(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{label:"检测标准管理",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:function(a){return e.editorReport(t.row)}}},[e._v(" 编辑 "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return e.addChildReport(t.row)}}},[e._v(" 子项新增 ")]),a("el-dropdown-item",[a("router-link",{attrs:{target:"_blank",to:"/pdf/download"}},[e._v(" 下载 ")])],1),a("el-dropdown-item",{nativeOn:{click:function(a){return e.childManage(t.row)}}},[e._v(" 子项管理 ")]),a("el-dropdown-item",{nativeOn:{click:function(a){return e.deleteReport(t.row.objectId)}}},[e._v(" 删除 ")])],1)],1)]}}])})],1)],1),a("div",{staticClass:"pageblock"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.pagesize,total:e.standardList.length,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:e.actionTypeTxt+"检验标准",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"addContent"},[a("el-form",{ref:"standardFormRef",attrs:{model:e.standardFormModel,rules:e.formrule}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"检验标准名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"检验标准名称"},model:{value:e.standardFormModel.name,callback:function(t){e.$set(e.standardFormModel,"name",t)},expression:"standardFormModel.name"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"适用产品",prop:"product"}},[a("el-select",{attrs:{placeholder:"选择适用产品"},model:{value:e.standardFormModel.product,callback:function(t){e.$set(e.standardFormModel,"product",t)},expression:"standardFormModel.product"}},e._l(e.pumpmodel,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"标准类型",prop:"model"}},[a("el-select",{attrs:{placeholder:"选择标准类型"},model:{value:e.standardFormModel.model,callback:function(t){e.$set(e.standardFormModel,"model",t)},expression:"standardFormModel.model"}},[a("el-option",{attrs:{label:"性能检测",value:"性能检测"}})],1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"备注信息"}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入标准备注信息"},model:{value:e.standardFormModel.desc,callback:function(t){e.$set(e.standardFormModel,"desc",t)},expression:"standardFormModel.desc"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"检测标准文号",prop:"inspection_number"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入检测标准文号"},model:{value:e.standardFormModel.inspection_number,callback:function(t){e.$set(e.standardFormModel,"inspection_number",t)},expression:"standardFormModel.inspection_number"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"标准类别",prop:"standard"}},[a("el-select",{attrs:{placeholder:"选择标准类别"},model:{value:e.standardFormModel.standard,callback:function(t){e.$set(e.standardFormModel,"standard",t)},expression:"standardFormModel.standard"}},e._l(e.standard,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"标准发行单位",prop:"client"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入标准发行单位"},model:{value:e.standardFormModel.client,callback:function(t){e.$set(e.standardFormModel,"client",t)},expression:"standardFormModel.client"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"标准发行时间"}},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"选择日期"},model:{value:e.standardFormModel.start_time,callback:function(t){e.$set(e.standardFormModel,"start_time",t)},expression:"standardFormModel.start_time"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"标准源文件",required:""}},[a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{placeholder:"请输入内容"},model:{value:e.standardFormModel.filesrc,callback:function(t){e.$set(e.standardFormModel,"filesrc",t)},expression:"standardFormModel.filesrc"}},[a("template",{slot:"append"},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-30px","z-index":"5",width:"100px",height:"40px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})])],1)],2)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.postStandardToDict("standardFormRef")}}},[e._v(" 确 定 ")])],1)]),a("el-dialog",{attrs:{visible:e.dialogReport,title:"标准子项新增",width:"50%"},on:{"update:visible":function(t){e.dialogReport=t}}},[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"100px",size:"small"}},[e._l(e.dynamicValidateForm.domains,(function(t,r){return a("el-row",{key:t.key},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"子项名称"+(r+1),prop:"domains."+r+".name",rules:{required:!0,message:"子项目名称"+(r+1)+"不能为空",trigger:"blur"}}},[a("el-input",{model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"domain.name"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"保证值"+(r+1),prop:"domains."+r+".title",rules:{required:!0,message:"保证值"+(r+1)+"不能为空",trigger:"blur"}}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"domain.title"}})],1)],1),a("el-col",{staticStyle:{float:"right"},attrs:{span:4}},[a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small",type:"danger"},on:{click:function(a){return a.preventDefault(),e.removeDomain(t)}}},[e._v(" 删除 ")])],1)],1)})),a("el-form-item",[a("el-button",{on:{click:e.addDomain}},[e._v("新增子项")])],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogReport=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.reportChildren("dynamicValidateForm")}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogTableVisible,title:"标准子项管理",width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.childrenData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize)}},[a("el-table-column",{attrs:{index:function(t){return t+1+(e.currentPage-1)*e.pageSize},label:"序号",type:"index",align:"center",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"title",label:"保证值",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteChildren(t.$index)}}},[e._v(" 删除 ")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"15px"}},[a("el-pagination",{attrs:{"page-sizes":[1,5,10,20],"page-size":e.pageSize,total:e.childrenData.length,align:"center",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleChildSizeChange,"current-change":e.handleChildCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.ReportChildrenDelete}},[e._v(" 确 定 ")])],1)],1)],1)},i=[],s=a("1da1"),o=(a("96cf"),a("b0c0"),a("d81d"),a("ac1f"),a("1276"),a("c19f"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f81"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("a434"),a("99af"),a("30f8"),a("e0e9")),n={},l={data:function(){return{loading:!1,dialogTableVisible:!1,dialogReport:!1,pumpmodel:["离心泵","潜水泵","混流泵","螺杆泵","轴流泵","旋涡泵","电动泵","蒸汽泵","齿轮泵","罗茨泵","滑片泵","喷射泵","升液泵","电磁泵"],standard:[{label:"国际标准",value:"ITBZ"},{label:"国家标准",value:"GJBZ"},{label:"行业标准",value:"HYBZ"},{label:"企业标准",value:"QYBZ"},{label:"地方标准",value:"DFBZ"},{label:"其他标准",value:"OTHER"}],formLabelWidth:"120px",dialogVisible:!1,departmentid:"",formInline:{name:"",standard:"",model:""},standardList:[],multipleSelection:[],pagesize:10,start:0,total:0,actionTypeTxt:"新增",standardFormModel:{name:"",product:"",inspection_number:"",standard:"",start_time:"",model:"",filesrc:"",desc:"",client:"",reportchildren:[]},formrule:{name:[{required:!0,message:"请输入检测标准名称",trigger:"blur"}],product:[{required:!0,message:"请选择标准适用产品",trigger:"change"}],inspection_number:[{required:!0,message:"请输入检测标准文号",trigger:"blur"}],standard:[{required:!0,message:"请选择标准类别",trigger:"change"}],client:[{required:!0,message:"请输入检测标准发行单位",trigger:"blur"}],model:[{required:!0,message:"请选择标准类型",trigger:"change"}]},departmentlaboratory:[],testbedlist:[],productlist:[],dynamicValidateForm:{domains:[{title:"",key:Date.now(),value:"",name:"",evidenceway:"",assess:""}]},childrenData:[],currentPage:1,pageSize:10}},watch:{dialogVisible:{deep:!0,handler:function(e){e||(this.$refs.standardFormRef.resetFields(),this.standardFormModel.desc="",this.standardFormModel.start_time="",this.standardFormModel.filesrc="",this.standardFormModel.name="",this.standardFormModel.product="",this.standardFormModel.inspection_number="",this.standardFormModel.standard="",this.standardFormModel.model="",this.standardFormModel.client="",this.standardFormModel.reportchildren=[])}}},mounted:function(){this.getStandardFromDict()},methods:{handleChildSizeChange:function(e){this.currentPage=1,this.pageSize=e},handleChildCurrentChange:function(e){this.currentPage=e},returnStandard:function(e){var t="";return this.standard.map((function(a){a.value==e&&(t=a.label)})),t},reset:function(){this.formInline.model="",this.formInline.standard="",this.formInline.name="",this.getStandardFromDict()},getStandardFromDict:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return 0==e&&(t.start=0),r=t.$loading({text:"加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i={where:{type:"inspectionStandard"},order:"-updatedAt"},a.next=5,Object(o["queryDict"])(i);case 5:s=a.sent,n=s.results,r.close(),t.standardList=n;case 9:case"end":return a.stop()}}),a)})))()},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.start=(e-1)*this.pagesize},addStandard:function(e){this.reportid="",this.dialogVisible=!0},upload:function(e){if(e){var t=e.target.files[0],a=t.name,r=e.target.files[0].type,i=(t.type.split("/")[0],"application/pdf"===r);if(!i)return this.$message({message:"只能上传PDF格式文件",type:"error"}),!1;this.loading=!0;var s=new FileReader;s.readAsDataURL(t);var o=this;s.onloadend=function(){var e=s.result,t=o.dataURItoBlob(e);o.uploadFile(t,a)}}},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return new Blob([r],{type:a})},uploadFile:function(e,t){var a=this,r=new FormData;r.append("file",e,t),r.append("output","json"),r.append("path",Cookies.get("appids")),r.append("scene",Cookies.get("appids")),r.append("auth_token",Cookies.get("access_token_pump"));this.$http.post(Cookies.get("fileserver"),r).then((function(e){e&&(a.loading=!1,a.standardFormModel.filesrc=e.body.url)})).catch((function(e){a.loading=!1,a.$message.error(e)}))},postStandardToDict:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("有必填项未填写"),!1;if(""!=t.standardFormModel.filesrc){var a=t.$store.state.user.roles[0]["name"];if(a){var r="role:"+a,i={};i[r]={read:!0,write:!0},t.$axiosWen.post("classes/Dict",{ACL:i,type:"inspectionStandard",data:t.standardFormModel,key:""}).then((function(e){e&&(t.$message({type:"success",message:"".concat(t.actionTypeTxt,"成功")}),t.dialogVisible=!1,t.getStandardFromDict(),t.$refs.standardFormRef.resetFields(),t.reportid="")})).catch((function(e){t.$message({message:"添加失败"})}))}else t.$message({message:"未获取到角色名"})}else t.$message.error("请上传检验标准PDF文件")}))},editorReport:function(e){this.dialogVisible=!0,this.reportid=e.objectId,this.standardFormModel.name=e.data.name,this.standardFormModel.product=e.data.product,this.standardFormModel.inspection_number=e.data.inspection_number,this.standardFormModel.standard=e.data.standard,this.standardFormModel.start_time=e.data.start_time,this.standardFormModel.model=e.data.model,this.standardFormModel.filesrc=e.data.filesrc,this.standardFormModel.desc=e.data.desc,this.standardFormModel.client=e.data.client,this.standardFormModel.reportchildren=e.data.reportchildren},deleteReport:function(e){var t=this;this.$confirm("此操作将永久此检测标准, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.$axiosWen.delete("classes/Dict/"+e).then((function(e){e&&(t.$message({type:"success",message:"删除成功!"}),t.getStandardFromDict())}))}))},addDomain:function(){this.dynamicValidateForm.domains.push({title:"",key:Date.now(),value:"",name:"",evidenceway:"",assess:""})},removeDomain:function(e){var t=this.dynamicValidateForm.domains.indexOf(e);-1!==t&&this.dynamicValidateForm.domains.splice(t,1)},addChildReport:function(e){this.dialogReport=!0,this.reportid=e.id,this.standardFormModel.name=e.data.name,this.standardFormModel.product=e.data.product,this.standardFormModel.inspection_number=e.data.inspection_number,this.standardFormModel.standard=e.data.standard,this.standardFormModel.start_time=e.data.start_time,this.standardFormModel.model=e.data.model,this.standardFormModel.filesrc=e.data.filesrc,this.standardFormModel.desc=e.data.desc,this.standardFormModel.client=e.data.client,this.standardFormModel.reportchildren=e.data.reportchildren},reportChildren:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("请填写完整"),!1;var a=Parse.Object.extend("InspectionStandard"),r=new a;r.id=t.reportid,t.form.reportchildren=t.form.reportchildren.concat(t.dynamicValidateForm.domains),r.set("data",t.form),r.save().then((function(e){t.$message.success("新增成功"),t.dialogReport=!1,t.dynamicValidateForm.domains=[{title:"",key:Date.now(),value:"",name:"",evidenceway:"",assess:""}]}))}))},childManage:function(e){this.childrenData=e.data.reportchildren.concat([]),this.dialogTableVisible=!0,this.reportid=e.id},deleteChildren:function(e){this.childrenData.splice(e+(this.currentPage-1)*this.pageSize,1)},ReportChildrenDelete:function(){var e=this;this.$confirm("是否删除标准子项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=Parse.Object.extend("InspectionStandard"),a=new t;a.id=e.reportid,n.reportchildren=e.childrenData,a.set("data",n),a.save().then((function(t){t&&(e.$message({type:"success",message:"删除成功!"}),e.dialogTableVisible=!1,e.getStandardFromDict(),e.required="")}))}))}}},c=l,d=(a("c355"),a("2877")),u=Object(d["a"])(c,r,i,!1,null,"2a226c27",null);t["default"]=u.exports},"236f":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"23f6":function(e,t,a){},2843:function(e,t,a){"use strict";a("d88f")},"28c0":function(e,t,a){"use strict";a("55d4")},3006:function(e,t,a){"use strict";a("c9a7")},"3c20":function(e,t,a){},"3ebd":function(e,t,a){},"3f29":function(e,t,a){"use strict";a("9e62")},"403d":function(e,t,a){"use strict";a("704f")},"41b5":function(e,t,a){},"450d":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},4813:function(e,t,a){"use strict";a("cfa6")},"499a":function(e,t,a){"use strict";a("6e72")},"4afb":function(e,t,a){},"4b21":function(e,t,a){"use strict";a("7eff")},"51c1":function(e,t,a){"use strict";a("eb47")},"543d":function(e,t,a){"use strict";a("450d")},5445:function(e,t,a){"use strict";a("e50d")},"55d4":function(e,t,a){},"568d":function(e,t,a){"use strict";a("3ebd")},"57be":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"PerformanceCurve"},[a("div",{ref:"chartViewTop",staticClass:"view-chart-box"},[e._v("Click to bind data.")])])},i=[],s=a("5530"),o=(a("b680"),a("164e")),n=a.n(o),l=a("5880"),c=(a("eb2f"),{name:"PerformanceCurve",components:{},data:function(){return{chartOption:{},xAxisDataArray:[],dataArrayScatterLift:[],dataArrayScatterPower:[],dataArrayScatterEfficiency:[],dataArrayLift:[],dataArrayPower:[],dataArrayEfficiency:[]}},computed:Object(s["a"])({factoryName:function(){return this.$store.state.SMHuser.factoryName}},Object(l["mapState"])({currentTask:function(e){return e.deviceData.currentTask},currentChildPageData:function(e){return e.deviceData.currentChildPageData}})),created:function(){},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$refs.chartViewTop;e.chartTop=n.a.init(t),e.drawLine()}))},beforeDestroy:function(){this.resetOption()},methods:{initData:function(){},reset:function(){this.resetOption()},drawLine:function(){this.xAxisDataArray=this.getFlowGapList(2750),this.dataArrayScatterLift=function(){var e=[],t=10;while(t--)e.push([Math.round(29*Math.random())+1,(30*Math.random()).toFixed(2)-0,180]);return e}(),this.dataArrayScatterPower=function(){var e=[],t=10;while(t--)e.push([Math.round(29*Math.random())+1,(30*Math.random()).toFixed(2)-0,180]);return e}(),this.dataArrayScatterEfficiency=function(){var e=[],t=10;while(t--)e.push([Math.round(29*Math.random())+1,(30*Math.random()).toFixed(2)-0,180]);return e}(),this.dataArrayLift=function(){for(var e=[],t=1;t<=20;t++)e.push(Math.round(30*Math.random()));return e}(),this.dataArrayPower=function(){for(var e=[],t=1;t<=20;t++)e.push(Math.round(30*Math.random()));return e}(),this.dataArrayEfficiency=function(){for(var e=[],t=1;t<=20;t++)e.push(Math.round(30*Math.random()));return e}(),this.chartOption={tooltip:{trigger:"axis"},legend:{data:["扬程","功率","效率"]},xAxis:[{type:"category",boundaryGap:!1,data:this.xAxisDataArray},{type:"value",scale:!0,splitNumber:29,axisLabel:{show:!1},splitLine:{show:!1}}],yAxis:[{type:"value",name:"扬程H/m",position:"left",axisLabel:{formatter:"{value}  H/m"}},{type:"value",name:"功率(kW)",position:"right",offset:50,axisLabel:{formatter:"{value}"}},{type:"value",name:"效率(%)",position:"right",axisLabel:{formatter:"{value}"}}],animation:!1,series:[{name:"扬程",type:"scatter",yAxisIndex:1,xAxisIndex:1,symbol:"circle",symbolSize:10,data:this.dataArrayScatterLift},{name:"效率",type:"scatter",yAxisIndex:1,xAxisIndex:1,symbol:"circle",symbolSize:10,data:this.dataArrayScatterEfficiency},{name:"功率",type:"scatter",yAxisIndex:1,xAxisIndex:1,symbol:"circle",symbolSize:10,data:this.dataArrayScatterPower},{name:"扬程",type:"line",smooth:!0,data:this.dataArrayLift},{name:"效率",type:"line",smooth:!0,data:this.dataArrayPower},{name:"功率",type:"line",smooth:!0,data:this.dataArrayEfficiency}]},this.symbolSizeArray=function(e){return Math.round(e[2]/10)},this.chartTop.setOption(this.chartOption)},getFlowGapList:function(e){if(!e)return[];var t=e/10;t=25*Math.round(t/25);var a=t/25;a%2!==0&&(t=25*(a+1));for(var r=[],i=0;i<=10;i++){var s=i*t;r.push(s)}return r},getH:function(e,t,a,r,i){return e-t*Math.pow(10,-3)*i+a*Math.pow(10,-7)*Math.pow(i,2)-r*Math.pow(10,-9)*Math.pow(i,3)},getE:function(e,t,a,r,i){return e+t*Math.pow(10,-2)*i-a*Math.pow(10,-7)*Math.pow(i,2)-r*Math.pow(10,-9)*Math.pow(i,3)},getP:function(e,t,a,r,i){return e+t*Math.pow(10,-2)*i-a*Math.pow(10,-6)*Math.pow(i,2)-r*Math.pow(10,-9)*Math.pow(i,3)},resetOption:function(){this.chartTop.clear(),this.xAxisDataArray=[],this.dataArrayScatterLift=[],this.dataArrayScatterPower=[],this.dataArrayScatterEfficiency=[],this.dataArrayLift=[],this.dataArrayPower=[],this.dataArrayEfficiency=[]}}}),d=c,u=(a("543d"),a("2877")),m=Object(u["a"])(d,r,i,!1,null,null,null);t["default"]=m.exports},"647f4":function(e,t,a){},"66a7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personpump"},[a("h3",[e._v("个人资质审核")]),a("div",{staticClass:"empower_top"},[a("div",{staticClass:"block_table"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,"cell-style":e.rowClass,"header-cell-style":e.headClass,size:"mini",stripe:"",border:""}},[a("el-table-column",{attrs:{label:"序号",width:"50",type:"index"}}),a("el-table-column",{attrs:{label:"企业名称",prop:"data.name"}}),a("el-table-column",{attrs:{label:"姓名",prop:"data.name"}}),a("el-table-column",{attrs:{label:"企业职务",prop:"data.job"}}),a("el-table-column",{attrs:{label:"出生日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.$timestampToTime(t.row.data.birthday).substring(0,11))+" ")])]}}])}),a("el-table-column",{attrs:{label:"最高学历"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.education))])]}}])}),a("el-table-column",{attrs:{label:"主修专业"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.professional))])]}}])}),a("el-table-column",{attrs:{label:"个人职称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.positional_titles))])]}}])}),a("el-table-column",{attrs:{label:"联系方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.userphone))])]}}])}),a("el-table-column",{attrs:{label:"从业时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.$timestampToTime(t.row.data.start_time).substring(0,11))+" ")])]}}])}),a("el-table-column",{attrs:{label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.$utc2beijing(t.row.createdAt).substring(0,13))+" ")])]}}])}),a("el-table-column",{attrs:{label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"info"}},[e._v(" 待审核 ")]):1==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"success"}},[e._v(" 审核通过 ")]):2==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"danger"}},[e._v(" 审核未通过 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"审核日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$timestampToTime(t.row.data.auditDate)))])]}}])}),a("el-table-column",{attrs:{label:"审核意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.data.suggestion?a("span",[e._v(" "+e._s(t.row.data.suggestion)+" ")]):a("span")]}}])}),a("el-table-column",{attrs:{label:"审核管理",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.lookUp(t.row)}}},[e._v(" 查看 ")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.examine(t.row)}}},[e._v(" 审核 ")])]}}])})],1)],1),a("div",{staticClass:"block_page"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"个人资质审核",width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.name)}})],1),a("el-form-item",{attrs:{label:"出生日期"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.birthday).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"毕业院校"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.graduate_institutions)}})],1),a("el-form-item",{attrs:{label:"身份证编号\n"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.identity)}})],1),a("el-form-item",{attrs:{label:"身份证正反面"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.frontimageUrl}})]),a("el-form-item",{attrs:{label:"家庭地址"}},[a("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.regionData},model:{value:e.currentRow.data.addr,callback:function(t){e.$set(e.currentRow.data,"addr",t)},expression:"currentRow.data.addr"}})],1),a("el-form-item",{attrs:{label:"相关工作年限"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.working_seniority+"年")}})],1),a("el-form-item",{attrs:{label:"培训经历"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.training_experience)}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业职务"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.job)}})],1),a("el-form-item",{attrs:{label:"最高学历"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.education)}})],1),a("el-form-item",{attrs:{label:"主修专业"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.professional)}})],1),a("el-form-item",{attrs:{label:"个人职称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.positional_titles)}})],1),a("el-form-item",{attrs:{label:"职业资质"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.joblicenseUrl}})]),a("el-form-item",{attrs:{label:"开始时间"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.start_time).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.userphone)}})],1),a("el-form-item",{attrs:{label:"相关从业经历"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.practitioners_experience)}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"认证审核",width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"verifyFormRef",attrs:{model:e.verifyForm,rules:e.verifyFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核状态",prop:"status"}},[a("el-radio-group",{model:{value:e.verifyForm.status,callback:function(t){e.$set(e.verifyForm,"status",t)},expression:"verifyForm.status"}},[a("el-radio",{attrs:{label:0}},[e._v("审核中")]),a("el-radio",{attrs:{label:2}},[e._v("审核未通过")]),a("el-radio",{attrs:{label:1}},[e._v("审核通过")])],1)],1),a("el-form-item",{attrs:{label:"审核意见",prop:"suggestion"}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.verifyForm.suggestion,callback:function(t){e.$set(e.verifyForm,"suggestion",t)},expression:"verifyForm.suggestion"}})],1),a("h3",{staticStyle:{height:"40px","padding-left":"20px","line-height":"40px",border:"1px solid #cccccc"}},[e._v(" U盾认证信息 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"U盾序列号",prop:"unumber"}},[a("el-input",{attrs:{placeholder:"请输入U盾序列号"},model:{value:e.verifyForm.unumber,callback:function(t){e.$set(e.verifyForm,"unumber",t)},expression:"verifyForm.unumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"U盾KEY值",prop:"ukey"}},[a("el-input",{attrs:{placeholder:"请输入U盾KEY值"},model:{value:e.verifyForm.ukey,callback:function(t){e.$set(e.verifyForm,"ukey",t)},expression:"verifyForm.ukey"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("verifyFormRef")}}},[e._v(" 提 交 ")])],1)])],1)},i=[],s=a("23a5"),o=(a("30f8"),{data:function(){return{dialogVisible:!1,formInline:{name:"",status:"all",starttime:"",endtime:""},tableData:[],pagesize:10,start:0,total:0,regionData:s["regionData"],verifyForm:{status:1,unumber:"",ukey:"",suggestion:""},verifyFormRules:{status:[{required:!0,message:"请选择审核状态",trigger:"change"}],suggestion:[{required:!0,message:"请填写认证审核意见",trigger:"blur"}],unumber:[{required:!0,message:"请填写U盾序列号",trigger:"blur"}],ukey:[{required:!0,message:"请填写U盾KEY",trigger:"blur"}]},currentRow:{data:{}},dialogFormVisible:!1}},computed:{fileDomain:function(){return this.$getUrlPrefix(this.$Cookies.get("fileserver"))}},mounted:function(){this.personEmpower()},methods:{headClass:function(){return"text-align:center"},rowClass:function(){return"text-align:center"},personEmpower:function(e){var t=this,a=this.$loading({background:"rgba(0, 0, 0, 0.5)"});this.$axiosWen.get("/classes/Dict",{params:{where:{type:"PersonAuthtication"},order:"-updatedAt"}}).then((function(e){if(a.close(),e&&e.results){var r=e.results;t.tableData=r}else t.tableData=r})).catch((function(e){a.close()}))},handleSizeChange:function(e){this.pagesize=e,this.personEmpower()},handleCurrentChange:function(e){this.start=(e-1)*this.pagesize,this.personEmpower()},lookUp:function(e){this.dialogFormVisible=!0,this.currentRow=e},examine:function(e){this.currentRow=e,this.dialogVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;var r=(new Date).getTime();t.currentRow.data.verifyStatus=t.verifyForm.status,t.currentRow.data.unumber=t.verifyForm.unumber,t.currentRow.data.ukey=t.verifyForm.ukey,t.currentRow.data.suggestion=t.verifyForm.suggestion,t.currentRow.data.auditDate=r,t.$axiosWen.put("classes/Dict/"+t.currentRow.objectId,{data:t.currentRow.data}).then((function(a){a&&(t.$message({type:"success",message:"审核成功"}),t.$refs[e].resetFields(),t.dialogVisible=!1,t.personEmpower())})).catch((function(e){t.$message({message:"审核失败"})}))}))}}}),n=o,l=(a("afa3"),a("a57f"),a("2877")),c=Object(l["a"])(n,r,i,!1,null,"70539440",null);t["default"]=c.exports},"69fe":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:8,sm:8,lg:5}},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("newVisitis")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-people"},[a("svg-icon",{attrs:{"icon-class":"shnehe","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v("审核总数量")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":102400,duration:2600}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:8,sm:8,lg:5}},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("messages")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-message"},[a("svg-icon",{attrs:{"icon-class":"message","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v("已审核数量")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":81212,duration:3e3}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:8,sm:8,lg:5}},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("purchases")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"icon-class":"money","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v("审核通过数量")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":9280,duration:3200}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:8,sm:8,lg:5}},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("shoppings")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-shopping"},[a("svg-icon",{attrs:{"icon-class":"shopping","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v("审核未通过数量")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":13600,duration:3600}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:8,sm:8,lg:5}},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetLineChartData("shoppings")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-shopping"},[a("svg-icon",{attrs:{"icon-class":"shopping","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v("待审核数量")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":13600,duration:3600}})],1)])])],1)},i=[],s={methods:{handleSetLineChartData:function(e){this.$emit("handleSetLineChartData",e)}}},o=s,n=(a("5445"),a("2877")),l=Object(n["a"])(o,r,i,!1,null,"8e76ec78",null);t["default"]=l.exports},"6cef":function(e,t,a){"use strict";a("ea1e")},"6dbf":function(e,t,a){},"6e72":function(e,t,a){},"704f":function(e,t,a){},"753f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"u_shield"},[a("div",{staticStyle:{width:"360px",height:"100vh"}}),a("div",{staticClass:"u_shieldright",staticStyle:{width:"calc(100% - 360px)",padding:"20px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"U盾状态分类"}},[a("el-select",{attrs:{placeholder:"U盾状态分类"},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},[a("el-option",{attrs:{label:"全部",value:"all"}})],1)],1),a("el-form-item",{attrs:{label:"应用实验室"}},[a("el-select",{attrs:{placeholder:"应用实验室"},model:{value:e.formInline.laboratory,callback:function(t){e.$set(e.formInline,"laboratory",t)},expression:"formInline.laboratory"}},[a("el-option",{attrs:{label:"全部",value:"all"}})],1)],1),a("el-form-item",{attrs:{label:"U盾编号"}},[a("el-input",{attrs:{placeholder:"U盾编号"},model:{value:e.formInline.unumber,callback:function(t){e.$set(e.formInline,"unumber",t)},expression:"formInline.unumber"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.reseting}},[e._v("查询")])],1)],1),a("div",[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.uShield}},[e._v(" U盾扫描 ")])],1),a("div",{staticClass:"blocktable"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{label:"U盾序列号",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.SerialNumber))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"300",label:"证书拥有者"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.Subject))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"300",label:"颁发机构"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.Issuer))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"300",label:"数据签名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.bstrCertB64))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"150",label:"发证时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.beforeDate))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"150",label:"到期时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.afterDate))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"100",label:"分配状态"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"授权单位"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"授权个人"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"U盾管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.editorUdun(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"}})]}}])})],1)],1),a("div",{staticClass:"blocktable"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"U盾设备赋权"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ushieldform",attrs:{model:e.ushieldform,rules:e.ushieldrule,size:"small"}},[a("p",{staticStyle:{height:"40px","margin-top":"0","font-size":"14px",color:"#409eff","border-bottom":"1px solid #cccccc"}},[e._v(" U盾详情信息 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"U盾序列号",prop:"unumber"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾序列号，插入U盾自动填充",readonly:""},model:{value:e.ushieldform.unumber,callback:function(t){e.$set(e.ushieldform,"unumber",t)},expression:"ushieldform.unumber"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"证书拥有者",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾申办人姓名，U盾扫描后自动录入",readonly:""},model:{value:e.ushieldform.name,callback:function(t){e.$set(e.ushieldform,"name",t)},expression:"ushieldform.name"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"发证日期",prop:"startdate"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾正式适用日期，U盾扫描后自动录入",readonly:""},model:{value:e.ushieldform.startdate,callback:function(t){e.$set(e.ushieldform,"startdate",t)},expression:"ushieldform.startdate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"颁发机构",prop:"bidunit"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"取证设备颁发机构",readonly:""},model:{value:e.ushieldform.bidunit,callback:function(t){e.$set(e.ushieldform,"bidunit",t)},expression:"ushieldform.bidunit"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"到期日期"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾有效期到期日期，U盾扫描后自动录入",readonly:""},model:{value:e.ushieldform.enddate,callback:function(t){e.$set(e.ushieldform,"enddate",t)},expression:"ushieldform.enddate"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"Ukey证书"}},[a("el-input",{attrs:{rows:4,autocomplete:"off",type:"textarea",placeholder:"请输入Ukey证书信息",readonly:""},model:{value:e.ushieldform.ukey,callback:function(t){e.$set(e.ushieldform,"ukey",t)},expression:"ushieldform.ukey"}})],1)],1)],1),a("p",{directives:[{name:"show",rawName:"v-show",value:""!=e.ushieldid,expression:"ushieldid != ''"}],staticStyle:{height:"40px","font-size":"14px",color:"#409eff","border-bottom":"1px solid #cccccc"}},[e._v(" U盾认证信息 ")]),a("el-row",{directives:[{name:"show",rawName:"v-show",value:""!=e.ushieldid,expression:"ushieldid != ''"}]},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"授权单位"}},[a("el-select",{attrs:{placeholder:"请选择通过资质认证的企业"},model:{value:e.ushieldform.company,callback:function(t){e.$set(e.ushieldform,"company",t)},expression:"ushieldform.company"}},e._l(e.companylist,(function(e){return a("el-option",{key:e.id,attrs:{label:e.attributes.empower.abbrname,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"授权个人"}},[a("el-select",{attrs:{autocomplete:"off",placeholder:"请选择通过资质认证的个人"},model:{value:e.ushieldform.username,callback:function(t){e.$set(e.ushieldform,"username",t)},expression:"ushieldform.username"}},e._l(e.personlist,(function(e){return a("el-option",{key:e.id,attrs:{label:e.attributes.name,value:e.id}})})),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addUshield}},[e._v("确 定")])],1)],1)],1)},i=[],s=(a("7db0"),a("b0c0"),a("30f8")),o=a("1cd8"),n=(a("61f7"),{components:{},data:function(){return{formInline:{unumber:"",status:"all",laboratory:""},tableData:[],dialogFormVisible:!1,formLabelWidth:"120px",ushieldform:{name:"",unumber:"",bidunit:"",issueunit:"",phone:"",ukey:"",startdate:"",enddate:"",address:"",company:"",username:""},ushieldrule:{name:[{required:!0,message:"申办人姓名不能为空",trigger:"blur"}],unumber:[{required:!0,message:"U盾序列号不能为空",trigger:"blur"}],bidunit:[{required:!0,message:"申办单位名称不能为空",trigger:"blur"}],startdate:[{required:!0,message:"发证日期不能为空",trigger:"blur"}],address:[{required:!0,message:"申办单位地址不能为空",trigger:"blur"}]},companylist:[],personlist:[],pagesize:10,start:0,total:0,ushieldid:""}},mounted:function(){this.getUshield()},methods:{getUshield:function(e){var t=this;0==e&&(this.start=0);var a=Parse.Object.extend("Devices"),r=new Parse.Query(a);r.skip(this.start),r.limit(this.pagesize),r.equalTo("basedata.type","ukey"),r.count().then((function(e){t.total=e,r.find().then((function(e){t.tableData=e}))}),(function(e){Object(s["returnLogin"])(e)}))},editorUdun:function(e){var t=this;this.ushieldid=e.id,this.dialogFormVisible=!0;var a=Parse.Object.extend("Devices"),r=new Parse.Query(a);r.get(this.ushieldid).then((function(e){t.ushieldform.unumber=e.attributes.basedata.SerialNumber,t.ushieldform.name=e.attributes.basedata.Subject,t.ushieldform.startdate=e.attributes.basedata.beforeDate,t.ushieldform.enddate=e.attributes.basedata.afterDate,t.ushieldform.bidunit=e.attributes.basedata.Issuer,t.ushieldform.ukey=e.attributes.basedata.bstrCertB64}),(function(e){Object(s["returnLogin"])(e)}))},uShield:function(){var e=this;this.dialogFormVisible=!0,this.ushieldid="",Object(o["getCert"])().then((function(t){t&&(e.ushieldform.unumber=t.SerialNumber,e.ushieldform.name=t.Subject,e.ushieldform.startdate=t.beforeDate,e.ushieldform.enddate=t.afterDate,e.ushieldform.bidunit=t.Issuer,e.ushieldform.ukey=t.bstrCertB64)})).catch((function(t){e.$message.error(t.error)}))},getCompany:function(){var e=this,t=Parse.Object.extend("Authentication"),a=new Parse.Query(t);a.equalTo("status","Pass"),a.find().then((function(t){e.companylist=t}),(function(e){Object(s["returnLogin"])(e)}))},getPerson:function(){var e=this,t=Parse.Object.extend("PersonAuthtication"),a=new Parse.Query(t);a.equalTo("status","Pass"),a.find().then((function(t){e.personlist=t}),(function(e){Object(s["returnLogin"])(e)}))},addUshield:function(){var e=this,t=Parse.Object.extend("Product"),a=new Parse.Query(t);a.equalTo("devType","ukey"),a.find().then((function(a){var r=Parse.Object.extend("Devices"),i=new r,o=new Parse.Query(r);o.equalTo("basedata.SerialNumber",e.ushieldform.unumber),o.find().then((function(r){if(0==r.length){""!=e.ushieldid&&(i.id=e.ushieldid);Parse.Object.extend("Product");var o=new t;o.id=a[0].id,i.set("product",o),i.set("basedata",{SerialNumber:e.ushieldform.unumber,Subject:e.ushieldform.name,beforeDate:e.ushieldform.startdate,afterDate:e.ushieldform.enddate,Issuer:e.ushieldform.bidunit,bstrCertB64:e.ushieldform.ukey,type:"ukey"}),i.save().then((function(t){t&&(e.$message.success("U盾创建成功"),e.ushieldid="",e.dialogFormVisible=!1)}),(function(e){Object(s["returnLogin"])(e)}))}else e.$message.error("此U盾已存在")}),(function(e){Object(s["returnLogin"])(e)}))}),(function(e){Object(s["returnLogin"])(e)}))}}}),l=n,c=(a("6cef"),a("2877")),d=Object(c["a"])(l,r,i,!1,null,"28dbd140",null);t["default"]=d.exports},"76a5":function(e,t,a){},"7bc4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"empower"},[a("el-steps",{attrs:{active:e.allactive,simple:""}},[a("el-step",{attrs:{title:"填写认证信息",icon:"el-icon-edit"}}),a("el-step",{attrs:{title:"填写实验室信息",icon:"el-icon-upload"}}),a("el-step",{attrs:{title:"审核结果",icon:"el-icon-picture"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.allactive,expression:"allactive == 1"}]},[a("div",{staticClass:"empowerone"},[a("el-card",{attrs:{shadow:"always"}},[a("el-form",{ref:"formrules",attrs:{model:e.enterpriseForm,rules:e.formrules,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"企业名称",prop:"businessname"}},[a("el-input",{attrs:{placeholder:"请填写企业名称"},model:{value:e.enterpriseForm.businessname,callback:function(t){e.$set(e.enterpriseForm,"businessname",t)},expression:"enterpriseForm.businessname"}})],1),a("el-form-item",{attrs:{label:"企业简称"}},[a("el-input",{attrs:{placeholder:"请填写企业简称"},model:{value:e.enterpriseForm.abbrname,callback:function(t){e.$set(e.enterpriseForm,"abbrname",t)},expression:"enterpriseForm.abbrname"}})],1),a("el-form-item",{attrs:{label:"法人代表名称",prop:"corporname"}},[a("el-input",{attrs:{placeholder:"请输入法人姓名"},model:{value:e.enterpriseForm.corporname,callback:function(t){e.$set(e.enterpriseForm,"corporname",t)},expression:"enterpriseForm.corporname"}})],1),a("el-form-item",{attrs:{label:"法人代表身份证",required:""}},[a("el-col",{attrs:{span:11}},[e.enterpriseForm.frontimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.enterpriseForm.frontimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px","z-index":"5",width:"200px",height:"200px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t,"front")}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.enterpriseForm.frontimageUrl,expression:"enterpriseForm.frontimageUrl == ''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",left:"110px",color:"#8c939d"}},[e._v(" 正面 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.enterpriseForm.frontimageUrl,expression:"enterpriseForm.frontimageUrl != ''"}],staticStyle:{position:"absolute",top:"150px",left:"200px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.enterpriseForm.frontimageUrl=""}}},[e._v(" 删除 ")])],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{position:"relative"},attrs:{span:11}},[e.enterpriseForm.contraryimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.enterpriseForm.contraryimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px","z-index":"5",width:"200px",height:"200px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t,"contrary")}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.enterpriseForm.contraryimageUrl,expression:"enterpriseForm.contraryimageUrl == ''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",left:"110px",color:"#8c939d"}},[e._v(" 反面 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.enterpriseForm.contraryimageUrl,expression:"enterpriseForm.contraryimageUrl != ''"}],staticStyle:{position:"absolute",top:"150px",left:"190px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.enterpriseForm.contraryimageUrl=""}}},[e._v(" 删除 ")])],1)],1),a("el-form-item",{attrs:{label:"注册地址",prop:"addr"}},[a("el-cascader",{attrs:{options:e.options,size:"large"},on:{change:e.handleModChange},model:{value:e.enterpriseForm.addr,callback:function(t){e.$set(e.enterpriseForm,"addr",t)},expression:"enterpriseForm.addr"}})],1),a("el-form-item",{attrs:{label:"营业年限",prop:"businessduration"}},[a("el-select",{attrs:{placeholder:"请选择营业年限"},model:{value:e.enterpriseForm.businessduration,callback:function(t){e.$set(e.enterpriseForm,"businessduration",t)},expression:"enterpriseForm.businessduration"}},[a("el-option",{attrs:{label:"初创企业",value:"1"}}),a("el-option",{attrs:{label:"1-3年",value:"2"}}),a("el-option",{attrs:{label:"3-5年",value:"3"}}),a("el-option",{attrs:{label:"5-10年",value:"4"}}),a("el-option",{attrs:{label:"10年以上",value:"5"}})],1)],1),a("el-form-item",{attrs:{label:"注册资金",prop:"registeredcapital"}},[a("el-input",{attrs:{placeholder:"请填写注册资金"},model:{value:e.enterpriseForm.registeredcapital,callback:function(t){e.$set(e.enterpriseForm,"registeredcapital",t)},expression:"enterpriseForm.registeredcapital"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1),a("el-form-item",{attrs:{label:"企业描述"}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入企业描述信息",maxlength:"300","show-word-limit":""},model:{value:e.enterpriseForm.businessdesc,callback:function(t){e.$set(e.enterpriseForm,"businessdesc",t)},expression:"enterpriseForm.businessdesc"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"企业英文名称"}},[a("el-input",{attrs:{placeholder:"请输入企业英文名称"},model:{value:e.enterpriseForm.englishname,callback:function(t){e.$set(e.enterpriseForm,"englishname",t)},expression:"enterpriseForm.englishname"}})],1),a("el-form-item",{attrs:{label:"统一社会信用代码"}},[a("el-input",{attrs:{placeholder:"请输入社会信用代码"},model:{value:e.enterpriseForm.creditcode,callback:function(t){e.$set(e.enterpriseForm,"creditcode",t)},expression:"enterpriseForm.creditcode"}})],1),a("el-form-item",{attrs:{label:"法人代表身份证号"}},[a("el-input",{attrs:{placeholder:"请输入法人身份证号码（18位）"},model:{value:e.enterpriseForm.identity,callback:function(t){e.$set(e.enterpriseForm,"identity",t)},expression:"enterpriseForm.identity"}})],1),a("el-form-item",{attrs:{label:"企业营业执照",required:""}},[e.enterpriseForm.businesslicense?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.enterpriseForm.businesslicense}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"300px",height:"200px"}}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px","z-index":"5",width:"200px",height:"200px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t,"business")}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.enterpriseForm.businesslicense,expression:"enterpriseForm.businesslicense == ''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",left:"100px",color:"#8c939d"}},[e._v(" 企业营业执照 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.enterpriseForm.businesslicense,expression:"enterpriseForm.businesslicense != ''"}],staticStyle:{position:"absolute",top:"150px",left:"200px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.enterpriseForm.businesslicense=""}}},[e._v(" 删除 ")])],1),a("el-form-item",{attrs:{label:"街道地址",prop:"roadress"}},[a("el-input",{attrs:{placeholder:"请填写企业街道地址"},model:{value:e.enterpriseForm.roadress,callback:function(t){e.$set(e.enterpriseForm,"roadress",t)},expression:"enterpriseForm.roadress"}})],1),a("el-form-item",{attrs:{label:"企业规模"}},[a("el-select",{attrs:{placeholder:"请选择企业规模"},model:{value:e.enterpriseForm.region,callback:function(t){e.$set(e.enterpriseForm,"region",t)},expression:"enterpriseForm.region"}},[a("el-option",{attrs:{label:"10人以下",value:"1"}}),a("el-option",{attrs:{label:"11-50人",value:"2"}}),a("el-option",{attrs:{label:"50-100人",value:"3"}}),a("el-option",{attrs:{label:"101-500人",value:"4"}}),a("el-option",{attrs:{label:"501-1000人",value:"5"}}),a("el-option",{attrs:{label:"1000人以上",value:"6"}})],1)],1),a("el-form-item",{attrs:{label:"经营范围",prop:"businessscope"}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入企业经营范围信息",maxlength:"300","show-word-limit":""},model:{value:e.enterpriseForm.businessscope,callback:function(t){e.$set(e.enterpriseForm,"businessscope",t)},expression:"enterpriseForm.businessscope"}})],1)],1)])],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{type:"primary"},on:{click:function(t){return e.next(2)}}},[e._v(" 下一步 ")]),a("el-button",{attrs:{type:"info"}},[e._v("取消")])],1)],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.allactive,expression:"allactive == 2"}]},[a("div",{staticClass:"block",staticStyle:{"box-sizing":"border-box",padding:"30px"}},[a("div",[e._v("企业实验室认证")]),a("div",{staticClass:"blocktop"},[a("LaboratoryForm",{ref:"laboratoryForm"}),a("div",{staticStyle:{"text-align":"center"}},[a("el-row",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.phase,expression:"phase == 1"}],attrs:{type:"primary"},on:{click:e.submitVerify}},[e._v(" 提交审核 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==e.phase,expression:"phase == 2"}],attrs:{disabled:e.currentRow.data&&1==e.currentRow.data.verifyStatus,type:"primary"},on:{click:e.submitVerifyUpdate}},[e._v(" 提交更新 ")]),a("el-button",{attrs:{type:"info",plain:""},on:{click:function(t){e.allactive=1}}},[e._v(" 上一步 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==e.phase,expression:"phase == 2"}],attrs:{type:"info",plain:""},on:{click:function(t){e.allactive=3}}},[e._v(" 审核结果 ")])],1)],1)],1)])]),3==e.allactive?a("div",[a("div",{staticClass:"block",staticStyle:{padding:"30px",margin:"0 auto","text-align":"center"}},[a("el-image",[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("svg-icon",{staticStyle:{width:"8rem",height:"8rem"},attrs:{"icon-class":"empowerexamine"}})],1)]),a("p",{directives:[{name:"show",rawName:"v-show",value:0==e.currentRow.data.verifyStatus,expression:"currentRow.data.verifyStatus == 0"}],staticStyle:{"font-size":"25px",color:"#e6a23c"}},[e._v(" 未审核 ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:1==e.currentRow.data.verifyStatus,expression:"currentRow.data.verifyStatus == 1"}],staticStyle:{"font-size":"25px",color:"#67c23a"}},[e._v(" 审核通过 ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:2==e.currentRow.data.verifyStatus,expression:"currentRow.data.verifyStatus == 2"}],staticStyle:{"font-size":"25px",color:"#f56c6c"}},[e._v(" 审核不通过 ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:0==e.currentRow.data.verifyStatus,expression:"currentRow.data.verifyStatus == 0"}],staticStyle:{"font-size":"14px",color:"#cccccc"}},[e._v(" 预计3到5个工作日完成，请耐心等待，谢谢您的配合和理解 ")]),a("p",[a("el-button",{attrs:{type:"info",plain:""},on:{click:function(t){e.allactive=2}}},[e._v("返回")])],1)],1)]):e._e(),a("el-dialog",{attrs:{visible:e.dialogVisible,"before-close":e.handleClose,title:"其他资质添加",width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialogform"},[a("el-form",{ref:"addotherform",staticClass:"demo-addotherform",attrs:{model:e.addotherform,rules:e.otheformrule,"label-width":"120px"}},[a("el-row",[a("p",{staticStyle:{"font-size":"14px",color:"#409eff","border-bottom":"1px solid #cccccc"}},[e._v(" 其他证书 ")]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"证书编号",prop:"name"}},[a("el-input",{model:{value:e.addotherform.name,callback:function(t){e.$set(e.addotherform,"name",t)},expression:"addotherform.name"}})],1),a("el-form-item",{attrs:{label:"签发日期",prop:"dateOfIssue"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp"},model:{value:e.addotherform.dateOfIssue,callback:function(t){e.$set(e.addotherform,"dateOfIssue",t)},expression:"addotherform.dateOfIssue"}})],1),a("el-form-item",{attrs:{label:"初次认可",prop:"initialRecognition"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp"},model:{value:e.addotherform.initialRecognition,callback:function(t){e.$set(e.addotherform,"initialRecognition",t)},expression:"addotherform.initialRecognition"}})],1),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{attrs:{rows:8,type:"textarea",placeholder:"请输入证书资质信息"},model:{value:e.addotherform.desc,callback:function(t){e.$set(e.addotherform,"desc",t)},expression:"addotherform.desc"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"发证机关",prop:"licencsIssuing"}},[a("el-input",{model:{value:e.addotherform.licencsIssuing,callback:function(t){e.$set(e.addotherform,"licencsIssuing",t)},expression:"addotherform.licencsIssuing"}})],1),a("el-form-item",{attrs:{label:"有效期至",prop:"termOfValidity"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择有效期至","value-format":"timestamp"},model:{value:e.addotherform.termOfValidity,callback:function(t){e.$set(e.addotherform,"termOfValidity",t)},expression:"addotherform.termOfValidity"}})],1),a("el-form-item",{attrs:{label:"更新时间",prop:"updatedDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发更新时间","value-format":"timestamp"},model:{value:e.addotherform.updatedDate,callback:function(t){e.$set(e.addotherform,"updatedDate",t)},expression:"addotherform.updatedDate"}})],1),a("el-form-item",{attrs:{label:"证书电子文件",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"/iotapi/upload"}},[e.addotherform.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.addotherform.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",left:"50px",color:"#8c939d"}},[e._v(" 证书电子文件 ")])]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.addotherform.imgsrc,expression:"addotherform.imgsrc != ''"}],staticStyle:{position:"absolute",top:"150px",left:"200px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.addotherform.imgsrc=""}}},[e._v(" 删除 ")])],1)],1)])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateOther("addotherform")}}},[e._v(" 确 定 ")])],1)])],1)},i=[],s=(a("b0c0"),a("159b"),a("4de4"),a("23a5")),o=a("c5c9"),n=[],l={name:"Empower",components:{LaboratoryForm:o["default"]},data:function(){var e=function(e,t,a){var r=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;r.test(t)?a():18!=t.length?a(new Error("请输入18位身份证号")):a(new Error("需要输入正确身份证号码"))},t=function(e,t,a){var r=/^[a-zA-Z&.,\'\/\-\s]+$/g;r.test(t)?a():a(new Error("请输入英文名称"))},a=function(e,t,a){var r=/[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}/;r.test(t)?t.length>18?a(new Error("请输入18位统一社会编码")):a():a(new Error("请输入正确统一社会编码"))},r=function(e,t,a){var r=/^(([^0][0-9]+|0)\.([0-9]{1,2})$)|^(([^0][0-9]+|0)$)|^(([1-9]+)\.([0-9]{1,2})$)|^(([1-9]+)$)/;r.test(t)?a():a(new Error("请填写公司注册资金,精确2位小数"))};return{laboratoryactive:1,editableTabsValue:"1",editableTabs:[{title:"实验室1",name:"1",content:""}],tabIndex:1,allactive:1,enterpriseForm:this.enterpriseInit(),options:s["regionData"],formrules:{identity:[{required:!0,message:"请输入正确身份证号",trigger:"blur"},{validator:e,trigger:"blur"}],businessname:[{required:!0,message:"请输入企业名称",trigger:"blur"}],abbrname:[{required:!0,message:"请输入企业简称",trigger:"blur"}],corporname:[{required:!0,message:"请输入法人姓名",trigger:"blur"}],englishname:[{required:!0,message:"请输入企业英文名称",trigger:"blur"},{validator:t}],creditcode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{validator:a}],addr:[{required:!0,message:"请选择公司注册地址",trigger:"change"}],roadress:[{required:!0,message:"请输入街道地址",trigger:"blur"}],registeredcapital:[{required:!0,message:"请输入公司注册资金",trigger:"blur"},{validator:r}],businessduration:[{required:!0,message:"请选择公司营业年限",trigger:"change"}],businessdesc:[{required:!0,message:"请输入企业描述信息",trigger:"blur"}],businessscope:[{required:!0,message:"请输入企业经营范围",trigger:"blur"}]},laboratoryBigDataObj:{laboratoryInfo:{}},ruleformrulecma:{cmaname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],cmadateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],cmalicencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],cmatermOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},otherForm:{other:""},ruleRules:{cnasname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ruleRules2:{cmaname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],cmadateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],cmalicencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],cmatermOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ruleRules1:{cnasname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},dialogVisible:!1,addotherform:{name:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",imgsrc:"",desc:""},previewother:{otherform:[]},otheformrule:{name:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},imgtype:"",currentRow:{},phase:1}},computed:{fileDomain:function(){return this.$getUrlPrefix(this.$Cookies.get("fileserver"))}},mounted:function(){this.getCompanyAuthentication()},methods:{getCompanyAuthentication:function(){var e=this;this.$axiosWen.get("/classes/Dict",{params:{where:{type:"CompanyAuthentication"},order:"-updatedAt"}}).then((function(t){t&&t.results&&t.results.length>0&&(e.phase=2,e.fillData(t.results[0]))})).catch((function(e){}))},fillData:function(e){this.currentRow=e,Object.assign(this.enterpriseForm,e["data"]["CompanyAuthentication"]),this.$refs["laboratoryForm"].fillData(e["data"]["Laboratory"])},upload:function(e,t){if(e){var a=e.target.files[0],r=a.name;e.target.files[0].type;this.imgtype=t,this.uploadFile(a,r)}},uploadFile:function(e,t){var a=this,r=new FormData;r.append("file",e),r.append("output","json"),r.append("path",this.$Cookies.get("appids")),r.append("scene",this.$Cookies.get("appids")),r.append("auth_token",this.$Cookies.get("access_token_pump")),this.$http.post(this.$Cookies.get("fileserver"),r).then((function(e){e&&("front"==a.imgtype?a.enterpriseForm.frontimageUrl=e.body.src:"contrary"==a.imgtype?a.enterpriseForm.contraryimageUrl=e.body.src:"business"==a.imgtype&&(a.enterpriseForm.businesslicense=e.body.src))})).catch((function(e){a.$message.error(e.bodyText)}))},addTab:function(e){var t=++this.tabIndex+"";this.editableTabs.push({title:"实验室"+this.tabIndex,name:t,content:"New Tab content"}),this.editableTabsValue=t},removeTab:function(e){var t=this.editableTabs,a=this.editableTabsValue;a===e&&t.forEach((function(r,i){if(r.name===e){var s=t[i+1]||t[i-1];s&&(a=s.name)}})),this.editableTabsValue=a,this.editableTabs=t.filter((function(t){return t.name!==e}))},next:function(e){2==e?this.allactive=2:this.uploadFrom()},handleClose:function(){this.dialogVisible=!1},updateOther:function(e){var t=this;this.$refs[e].validate((function(a){if(a){if(""==t.addotherform.imgsrc)return void t.$message.error("请上传资质照片");var r={title:t.otherForm.other,name:t.addotherform.name,dateOfIssue:t.addotherform.dateOfIssue,updatedDate:t.addotherform.updatedDate,initialRecognition:t.addotherform.initialRecognition,termOfValidity:t.addotherform.termOfValidity,licencsIssuing:t.addotherform.licencsIssuing,imgsrc:t.addotherform.imgsrc,desc:t.addotherform.desc};n.push(r),t.$refs[e].resetFields(),t.addotherform.imgsrc="",t.dialogVisible=!1}}))},addOther:function(){""==this.otherForm.other?this.$message.warning("请填写其他资质名称"):this.dialogVisible=!0},handleModChange:function(e){},cancelAdd:function(){this.initData(),this.allactive=1},initData:function(){this.enterpriseForm=this.enterpriseInit()},enterpriseInit:function(){return{name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:[],roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""}},submitVerify:function(){var e=this;this.$refs["laboratoryForm"].getFormData().then((function(t){t&&t.laboratoryObj&&(e.laboratoryBigDataObj.laboratoryInfo=t.laboratoryObj,e.uploadFrom())}))},submitVerifyUpdate:function(){var e=this;this.$refs["laboratoryForm"].getFormData().then((function(t){t&&t.laboratoryObj&&(e.laboratoryBigDataObj.laboratoryInfo=t.laboratoryObj,e.uploadFromUpdate())}))},uploadFromUpdate:function(){var e=this,t={CompanyAuthentication:this.enterpriseForm,Laboratory:this.laboratoryBigDataObj,verifyStatus:0};this.$axiosWen.put("classes/Dict/"+this.currentRow.objectId,{data:t}).then((function(t){t&&(e.$message({type:"success",message:"更新成功"}),e.allactive=3)})).catch((function(t){e.$message({type:"error",message:"更新失敗"})}))},uploadFrom:function(){var e=this,t=this.$store.state.user.roles[0]["name"],a=this.$store.state.user["name"];if(t){var r="role:"+t,i={},s={CompanyAuthentication:this.enterpriseForm,Laboratory:this.laboratoryBigDataObj,verifyStatus:0};i[r]={read:!0,write:!0},this.$axiosWen.post("classes/Dict",{ACL:i,type:"CompanyAuthentication",data:s,key:a}).then((function(t){t&&(e.$message({type:"success",message:"提交成功"}),e.allactive=3)})).catch((function(t){e.$message({type:"error",message:"提交失敗"})}))}else this.$message({message:"未获取到角色名"})}}},c=l,d=(a("eaef"),a("3f29"),a("2877")),u=Object(d["a"])(c,r,i,!1,null,"039da82f",null);t["default"]=u.exports},"7eff":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},8488:function(e,t,a){"use strict";a("9974")},"8ee3":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"empower"},[a("el-steps",{attrs:{active:e.allactive,simple:""}},[a("el-step",{attrs:{title:"填写认证信息",icon:"el-icon-edit"}}),a("el-step",{attrs:{title:"填写实验室基本信息",icon:"el-icon-upload"}}),a("el-step",{attrs:{title:"审核结果",icon:"el-icon-picture"}})],1),1==e.allactive?a("div",[a("el-steps",{attrs:{active:e.active}},[a("el-step",{attrs:{title:"认证企业新增",icon:"el-icon-s-check",description:"企业认证新增"}}),a("el-step",{attrs:{title:"预览提交",icon:"el-icon-picture"}})],1),1==e.active?a("div",{staticClass:"empowerone"},[a("el-card",{attrs:{shadow:"always"}},[a("el-form",{ref:"formrules",attrs:{model:e.authenticationForm,rules:e.formrules,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"企业名称",prop:"businessname"}},[a("el-input",{attrs:{placeholder:"请填写企业名称"},model:{value:e.authenticationForm.businessname,callback:function(t){e.$set(e.authenticationForm,"businessname",t)},expression:"authenticationForm.businessname"}})],1),a("el-form-item",{attrs:{label:"企业简称"}},[a("el-input",{attrs:{placeholder:"请填写企业简称"},model:{value:e.authenticationForm.abbrname,callback:function(t){e.$set(e.authenticationForm,"abbrname",t)},expression:"authenticationForm.abbrname"}})],1),a("el-form-item",{attrs:{label:"法人代表名称",prop:"corporname"}},[a("el-input",{attrs:{placeholder:"请输入法人姓名"},model:{value:e.authenticationForm.corporname,callback:function(t){e.$set(e.authenticationForm,"corporname",t)},expression:"authenticationForm.corporname"}})],1),a("el-form-item",{attrs:{label:"法人代表身份证",required:""}},[a("el-col",{attrs:{span:11}},[e.authenticationForm.frontimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.authenticationForm.frontimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px","z-index":"5",width:"200px",height:"200px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t,"front")}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.authenticationForm.frontimageUrl,expression:"authenticationForm.frontimageUrl == ''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",left:"110px",color:"#8c939d"}},[e._v(" 正面 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.authenticationForm.frontimageUrl,expression:"authenticationForm.frontimageUrl != ''"}],staticStyle:{position:"absolute",top:"150px",left:"200px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.authenticationForm.frontimageUrl=""}}},[e._v(" 删除 ")])],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{position:"relative"},attrs:{span:11}},[e.authenticationForm.contraryimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.authenticationForm.contraryimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px","z-index":"5",width:"200px",height:"200px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t,"contrary")}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.authenticationForm.contraryimageUrl,expression:"authenticationForm.contraryimageUrl == ''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",left:"110px",color:"#8c939d"}},[e._v(" 反面 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.authenticationForm.contraryimageUrl,expression:"authenticationForm.contraryimageUrl != ''"}],staticStyle:{position:"absolute",top:"150px",left:"190px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.authenticationForm.contraryimageUrl=""}}},[e._v(" 删除 ")])],1)],1),a("el-form-item",{attrs:{label:"注册地址",prop:"addr"}},[a("el-cascader",{attrs:{options:e.options,size:"large"},on:{change:e.handleModChange},model:{value:e.authenticationForm.addr,callback:function(t){e.$set(e.authenticationForm,"addr",t)},expression:"authenticationForm.addr"}})],1),a("el-form-item",{attrs:{label:"营业年限",prop:"businessduration"}},[a("el-select",{attrs:{placeholder:"请选择营业年限"},model:{value:e.authenticationForm.businessduration,callback:function(t){e.$set(e.authenticationForm,"businessduration",t)},expression:"authenticationForm.businessduration"}},[a("el-option",{attrs:{label:"初创企业",value:"1"}}),a("el-option",{attrs:{label:"1-3年",value:"2"}}),a("el-option",{attrs:{label:"3-5年",value:"3"}}),a("el-option",{attrs:{label:"5-10年",value:"4"}}),a("el-option",{attrs:{label:"10年以上",value:"5"}})],1)],1),a("el-form-item",{attrs:{label:"注册资金",prop:"registeredcapital"}},[a("el-input",{attrs:{placeholder:"请填写注册资金"},model:{value:e.authenticationForm.registeredcapital,callback:function(t){e.$set(e.authenticationForm,"registeredcapital",t)},expression:"authenticationForm.registeredcapital"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1),a("el-form-item",{attrs:{label:"企业描述"}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入企业描述信息",maxlength:"300","show-word-limit":""},model:{value:e.authenticationForm.businessdesc,callback:function(t){e.$set(e.authenticationForm,"businessdesc",t)},expression:"authenticationForm.businessdesc"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"企业英文名称"}},[a("el-input",{attrs:{placeholder:"请输入企业英文名称"},model:{value:e.authenticationForm.englishname,callback:function(t){e.$set(e.authenticationForm,"englishname",t)},expression:"authenticationForm.englishname"}})],1),a("el-form-item",{attrs:{label:"统一社会信用代码",prop:"creditcode"}},[a("el-input",{attrs:{placeholder:"请输入社会信用代码"},model:{value:e.authenticationForm.creditcode,callback:function(t){e.$set(e.authenticationForm,"creditcode",t)},expression:"authenticationForm.creditcode"}})],1),a("el-form-item",{attrs:{label:"法人代表身份证号",prop:"identity"}},[a("el-input",{attrs:{placeholder:"请输入法人身份证号码（18位）"},model:{value:e.authenticationForm.identity,callback:function(t){e.$set(e.authenticationForm,"identity",t)},expression:"authenticationForm.identity"}})],1),a("el-form-item",{attrs:{label:"企业营业执照",required:""}},[e.authenticationForm.businesslicense?a("img",{staticClass:"avatar",attrs:{src:e.authenticationForm.businesslicense}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"300px",height:"200px"}}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px","z-index":"5",width:"200px",height:"200px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t,"business")}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.authenticationForm.businesslicense,expression:"authenticationForm.businesslicense == ''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",left:"100px",color:"#8c939d"}},[e._v(" 企业营业执照 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.authenticationForm.businesslicense,expression:"authenticationForm.businesslicense != ''"}],staticStyle:{position:"absolute",top:"150px",left:"200px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.authenticationForm.businesslicense=""}}},[e._v(" 删除 ")])],1),a("el-form-item",{attrs:{label:"街道地址",prop:"roadress"}},[a("el-input",{attrs:{placeholder:"请填写企业街道地址"},model:{value:e.authenticationForm.roadress,callback:function(t){e.$set(e.authenticationForm,"roadress",t)},expression:"authenticationForm.roadress"}})],1),a("el-form-item",{attrs:{label:"企业规模"}},[a("el-select",{attrs:{placeholder:"请选择企业规模"},model:{value:e.authenticationForm.region,callback:function(t){e.$set(e.authenticationForm,"region",t)},expression:"authenticationForm.region"}},[a("el-option",{attrs:{label:"10人以下",value:"1"}}),a("el-option",{attrs:{label:"11-50人",value:"2"}}),a("el-option",{attrs:{label:"50-100人",value:"3"}}),a("el-option",{attrs:{label:"101-500人",value:"4"}}),a("el-option",{attrs:{label:"501-1000人",value:"5"}}),a("el-option",{attrs:{label:"1000人以上",value:"6"}})],1)],1),a("el-form-item",{attrs:{label:"经营范围",prop:"businessscope"}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入企业经营范围信息",maxlength:"300","show-word-limit":""},model:{value:e.authenticationForm.businessscope,callback:function(t){e.$set(e.authenticationForm,"businessscope",t)},expression:"authenticationForm.businessscope"}})],1)],1)])],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{type:"primary"},on:{click:function(t){return e.next("formrules")}}},[e._v(" 提交,下一步 ")]),a("el-button",{attrs:{type:"info"}},[e._v("取消")])],1)],1)],1):e._e(),2==e.allactive?a("div",[a("div",{staticClass:"block",staticStyle:{"box-sizing":"border-box",padding:"30px"}},[a("p",{staticStyle:{height:"40px","padding-left":"20px",margin:"0","font-size":"20px","line-height":"40px",border:"1px solid #cccccc"}},[e._v(" 企业实验室认证 ")]),a("div",{staticClass:"blocktop",staticStyle:{"margin-top":"20px"}},[a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":e.removeTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addTab(e.editableTabsValue)}}},[e._v(" 新增 ")]),e._l(e.editableTabs,(function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[e._v(" 此组件会抛出resultes事件,把数据传递过来 "),a("LaboratoryForm",{on:{resultes:e.getLaboratory}})],1)}))],2),a("div",{staticStyle:{"text-align":"center"}},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.previewLaboratory}},[e._v(" 确定,预览 ")]),a("el-button",{attrs:{type:"info"}},[e._v("取消")])],1)],1)],1)]),2==e.laboratoryactive?a("div",[a("el-tabs",{attrs:{type:"card"},model:{value:e.laboratoryFormvalue,callback:function(t){e.laboratoryFormvalue=t},expression:"laboratoryFormvalue"}},e._l(e.laboratorylist,(function(e,t){return a("el-tab-pane",{key:e.laboratoryForm.name,attrs:{label:"实验室"+(t+1),name:e.laboratoryForm.name}},[a("Preview",{attrs:{"laboratory-form":e.laboratoryForm,otherform:e.otherslist}})],1)})),1),a("div",{staticStyle:{"text-align":"center"}},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.allactive=3}}},[e._v("确定")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){e.laboratoryactive=1}}},[e._v(" 返回上一步 ")])],1)],1)],1):e._e()]):e._e(),2==e.allactive?a("div",[a("div",{staticClass:"block",staticStyle:{padding:"30px",margin:"0 auto","text-align":"center"}},[a("el-image",[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("svg-icon",{staticStyle:{width:"8rem",height:"8rem"},attrs:{"icon-class":"empowerexamine"}})],1)]),a("p",{staticStyle:{"font-size":"25px",color:"#409eff"}},[e._v("正在审核中")]),a("p",{staticStyle:{"font-size":"20px"}},[e._v("审核员联系电话：17201202365")]),a("p",{staticStyle:{"font-size":"14px",color:"#cccccc"}},[e._v(" 预计3到5个工作日完成，请耐心等待，谢谢您的配合和理解 ")]),a("p",[a("el-button",{attrs:{type:"primary"},on:{click:e.cancelAdd}},[e._v(" 撤销审核 "),a("i",{staticClass:"el-icon-s-fold"})])],1)],1)]):e._e(),a("el-dialog",{attrs:{visible:e.dialogVisible,"before-close":e.handleClose,title:"其他资质添加",width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialogform"},[a("el-form",{ref:"addotherform",staticClass:"demo-addotherform",attrs:{model:e.addotherform,rules:e.otheformrule,"label-width":"120px"}},[a("el-row",[a("p",{staticStyle:{"font-size":"14px",color:"#409eff","border-bottom":"1px solid #cccccc"}},[e._v(" 其他证书 ")]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"证书编号",prop:"name"}},[a("el-input",{model:{value:e.addotherform.name,callback:function(t){e.$set(e.addotherform,"name",t)},expression:"addotherform.name"}})],1),a("el-form-item",{attrs:{label:"签发日期",prop:"dateOfIssue"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp"},model:{value:e.addotherform.dateOfIssue,callback:function(t){e.$set(e.addotherform,"dateOfIssue",t)},expression:"addotherform.dateOfIssue"}})],1),a("el-form-item",{attrs:{label:"初次认可",prop:"initialRecognition"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp"},model:{value:e.addotherform.initialRecognition,callback:function(t){e.$set(e.addotherform,"initialRecognition",t)},expression:"addotherform.initialRecognition"}})],1),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{attrs:{rows:8,type:"textarea",placeholder:"请输入证书资质信息"},model:{value:e.addotherform.desc,callback:function(t){e.$set(e.addotherform,"desc",t)},expression:"addotherform.desc"}})],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"发证机关",prop:"licencsIssuing"}},[a("el-input",{model:{value:e.addotherform.licencsIssuing,callback:function(t){e.$set(e.addotherform,"licencsIssuing",t)},expression:"addotherform.licencsIssuing"}})],1),a("el-form-item",{attrs:{label:"有效期至",prop:"termOfValidity"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择有效期至","value-format":"timestamp"},model:{value:e.addotherform.termOfValidity,callback:function(t){e.$set(e.addotherform,"termOfValidity",t)},expression:"addotherform.termOfValidity"}})],1),a("el-form-item",{attrs:{label:"更新时间",prop:"updatedDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发更新时间","value-format":"timestamp"},model:{value:e.addotherform.updatedDate,callback:function(t){e.$set(e.addotherform,"updatedDate",t)},expression:"addotherform.updatedDate"}})],1),a("el-form-item",{attrs:{label:"证书电子文件",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"/iotapi/upload"}},[e.addotherform.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.addotherform.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",left:"50px",color:"#8c939d"}},[e._v(" 证书电子文件 ")])]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.addotherform.imgsrc,expression:"addotherform.imgsrc != ''"}],staticStyle:{position:"absolute",top:"150px",left:"200px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.addotherform.imgsrc=""}}},[e._v(" 删除 ")])],1)],1)])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateOther("addotherform")}}},[e._v(" 确 定 ")])],1)])],1):e._e()],1)},i=[],s=(a("b0c0"),a("ac1f"),a("1276"),a("c19f"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f81"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("159b"),a("4de4"),a("7db0"),a("23a5")),o=a("30f8"),n=a("c5c9"),l=a("be65"),c=a.n(l),d=a("d324"),u=[],m={components:{LaboratoryForm:n["default"],Preview:d["default"]},data:function(){var e=function(e,t,a){var r=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;r.test(t)?a():18!=t.length?a(new Error("请输入18位身份证号")):a(new Error("需要输入正确身份证号码"))},t=function(e,t,a){var r=/^[a-zA-Z&.,\'\/\-\s]+$/g;r.test(t)?a():a(new Error("请输入英文名称"))},a=function(e,t,a){var r=/[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}/;r.test(t)?t.length>18?a(new Error("请输入18位统一社会编码")):a():a(new Error("请输入正确统一社会编码"))},r=function(e,t,a){var r=/^(([^0][0-9]+|0)\.([0-9]{1,2})$)|^(([^0][0-9]+|0)$)|^(([1-9]+)\.([0-9]{1,2})$)|^(([1-9]+)$)/;r.test(t)?a():a(new Error("请填写公司注册资金,精确2位小数"))};return{laboratoryactive:1,editableTabsValue:"1",laboratoryFormvalue:"1",editableTabs:[{title:"实验室1",name:"1",content:""}],tabIndex:1,allactive:1,active:1,authenticationForm:{name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:[],roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""},authenticationPreviewForm:{name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:"",roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""},options:s["regionData"],formrules:{identity:[{required:!0,message:"请输入正确身份证号",trigger:"blur"},{validator:e,trigger:"blur"}],businessname:[{required:!0,message:"请输入企业名称",trigger:"blur"}],abbrname:[{required:!0,message:"请输入企业简称",trigger:"blur"}],corporname:[{required:!0,message:"请输入法人姓名",trigger:"blur"}],englishname:[{required:!0,message:"请输入企业英文名称",trigger:"blur"},{validator:t}],creditcode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{validator:a}],addr:[{required:!0,message:"请选择公司注册地址",trigger:"change"}],roadress:[{required:!0,message:"请输入街道地址",trigger:"blur"}],registeredcapital:[{required:!0,message:"请输入公司注册资金",trigger:"blur"},{validator:r}],businessduration:[{required:!0,message:"请选择公司营业年限",trigger:"change"}],businessdesc:[{required:!0,message:"请输入企业描述信息",trigger:"blur"}],businessscope:[{required:!0,message:"请输入企业经营范围",trigger:"blur"}]},ruleForm:{cnasname:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",cnasimgsrc:"",cnasdesc:""},ruleformcma:{cmaname:"",cmadateOfIssue:"",cmalicencsIssuing:"",cmatermOfValidity:"",cmaimgsrc:"",cmadesc:""},ruleformrulecma:{cmaname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],cmadateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],cmalicencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],cmatermOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ruleForm1:{cnasname:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",cnasimgsrc:"",cnasdesc:""},ruleForm2:{cmaname:"",cmadateOfIssue:"",cmalicencsIssuing:"",cmatermOfValidity:"",cmaimgsrc:"",cmadesc:""},otherForm:{other:""},ruleRules:{cnasname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ruleRules2:{cmaname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],cmadateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],cmalicencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],cmatermOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ruleRules1:{cnasname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},dialogVisible:!1,addotherform:{name:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",imgsrc:"",desc:""},previewother:{otherform:[]},otheformrule:{name:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ewpowerid:"",laboratorylist:[],imgtype:""}},mounted:function(){},methods:{upload:function(e,t){if(this.imgtype=t,e){var a=e.target.files[0],r=a.name,i=e.target.files[0].type,s=(t=a.type.split("/")[0],"image/jpeg"===i||"image/JPEG"===i||"image/png"===i||"image/PNG"===i||"image/bpm"===i||"image/BPM"===i);if(!s)return this.$message({message:"请上传图片",type:"error"}),!1;var o=new FileReader;o.readAsDataURL(a);var n=this;o.onloadend=function(){var e=o.result,t=n.dataURItoBlob(e);n.uploadFile(t,r)}}},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return new Blob([r],{type:a})},uploadFile:function(e,t){var a=this,r=new FormData;r.append("file",e,t),r.append("output","json"),r.append("path",c.a.get("appids")),r.append("scene",c.a.get("appids")),r.append("auth_token",c.a.get("access_token_pump"));this.$http.post(c.a.get("fileserver"),r).then((function(e){e&&("front"==a.imgtype?a.authenticationForm.frontimageUrl=e.body.url:"contrary"==a.imgtype?a.authenticationForm.contraryimageUrl=e.body.url:"business"==a.imgtype&&(a.authenticationForm.businesslicense=e.body.url))})).catch((function(e){a.$message.error(e.bodyText)}))},addTab:function(e){var t=++this.tabIndex+"";this.editableTabs.push({title:"实验室"+this.tabIndex,name:t,content:"New Tab content"}),this.editableTabsValue=t},removeTab:function(e){var t=this.editableTabs,a=this.editableTabsValue;a===e&&t.forEach((function(r,i){if(r.name===e){var s=t[i+1]||t[i-1];s&&(a=s.name)}})),this.editableTabsValue=a,this.editableTabs=t.filter((function(t){return t.name!==e}))},tagGoIndex:function(e){this.isshowactive=e},addTag:function(){this.dynamicTags.push("实验室")},originData:function(){var e=this,t=Parse.Object.extend("Authentication"),a=new Parse.Query(t);a.find().then((function(t){t.length>0&&(t[0].attributes.empower&&(e.authenticationForm.name=t[0].attributes.empower.name,e.authenticationForm.region=t[0].attributes.empower.region,e.authenticationForm.desc=t[0].attributes.empower.desc,e.authenticationForm.identity=t[0].attributes.empower.identity,e.authenticationForm.frontimageUrl=t[0].attributes.empower.frontimageUrl,e.authenticationForm.contraryimageUrl=t[0].attributes.empower.contraryimageUrl,e.authenticationForm.businesslicense=t[0].attributes.empower.businesslicense,e.authenticationForm.businessname=t[0].attributes.empower.businessname,e.authenticationForm.abbrname=t[0].attributes.empower.abbrname,e.authenticationForm.corporname=t[0].attributes.empower.corporname,e.authenticationForm.englishname=t[0].attributes.empower.englishname,e.authenticationForm.creditcode=t[0].attributes.empower.creditcode,e.authenticationForm.addr=t[0].attributes.empower.addr,e.authenticationForm.roadress=t[0].attributes.empower.roadress,e.authenticationForm.businessduration=t[0].attributes.empower.businessduration,e.authenticationForm.businessdesc=t[0].attributes.empower.businessdesc,e.authenticationForm.businessscope=t[0].attributes.empower.businessscope,e.authenticationForm.registeredcapital=t[0].attributes.empower.registeredcapital,e.ewpowerid=t[0].id),t[0].attributes.cnas&&(e.ruleForm.cnasname=t[0].attributes.cnas.cnasname,e.ruleForm.dateOfIssue=t[0].attributes.cnas.dateOfIssue,e.ruleForm.updatedDate=t[0].attributes.cnas.updatedDate,e.ruleForm.initialRecognition=t[0].attributes.cnas.initialRecognition,e.ruleForm.termOfValidity=t[0].attributes.cnas.termOfValidity,e.ruleForm.licencsIssuing=t[0].attributes.cnas.licencsIssuing,e.ruleForm.cnasimgsrc=t[0].attributes.cnas.cnasimgsrc,e.ruleForm.cnasdesc=t[0].attributes.cnas.cnasdesc),t[0].attributes.cma&&(e.ruleformcma.cmaname=t[0].attributes.cma.cmaname,e.ruleformcma.cmadateOfIssue=t[0].attributes.cma.cmadateOfIssue,e.ruleformcma.cmalicencsIssuing=t[0].attributes.cma.cmalicencsIssuing,e.ruleformcma.cmatermOfValidity=t[0].attributes.cma.cmatermOfValidity,e.ruleformcma.cmaimgsrc=t[0].attributes.cma.cmaimgsrc,e.ruleformcma.cmadesc=t[0].attributes.cma.cmadesc),t[0].attributes.other&&(u=t[0].attributes.other))}),(function(e){Object(o["returnLogin"])(e)}))},next:function(e){var t=this;this.active++,this.$refs[e].validate((function(e){if(!e)return t.$message.error("有必填项未填写"),!1;if(""!=t.authenticationForm.frontimageUrl)if(""!=t.authenticationForm.contraryimageUrl)if(""!=t.authenticationForm.businesslicense)t.authenticationForm.name,t.authenticationForm.region,t.authenticationForm.desc,t.authenticationForm.identity,t.authenticationForm.frontimageUrl,t.authenticationForm.contraryimageUrl,t.authenticationForm.businesslicense,t.authenticationForm.businessname,t.authenticationForm.abbrname,t.authenticationForm.corporname,t.authenticationForm.englishname,t.authenticationForm.creditcode,t.authenticationForm.addr,t.authenticationForm.roadress,t.authenticationForm.businessduration,t.authenticationForm.businessdesc,t.authenticationForm.businessscope,t.authenticationForm.registeredcapital;else t.$message.error("请上传企业营业执照");else t.$message.error("请上传身份证背面照");else t.$message.error("请上传身份证正面照")}))},beforeAvatarUpload1:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},beforeAvatarUpload2:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},handleClose:function(){this.dialogVisible=!1},nextTo:function(e,t){var a,r,i=this;if(this.$refs[e].validate((function(e){e&&(a=!0)})),this.$refs[t].validate((function(e){e&&(r=!0)})),a=!0,r=!0,a||r){if(a&&""==this.ruleForm.cnasimgsrc)return void this.$message.error("请上传CNAS证件照片");if(r&&""==this.ruleformcma.cmaimgsrc)return void this.$message.error("请上传CMA证件照片");var s=Parse.Object.extend("Authentication"),n=new s;n.id=this.ewpowerid,n.set("cnas",{cnasname:this.ruleForm.cnasname,dateOfIssue:this.ruleForm.dateOfIssue,updatedDate:this.ruleForm.updatedDate,initialRecognition:this.ruleForm.initialRecognition,termOfValidity:this.ruleForm.termOfValidity,licencsIssuing:this.ruleForm.licencsIssuing,cnasimgsrc:this.ruleForm.cnasimgsrc,cnasdesc:this.ruleForm.cnasdesc}),n.set("cma",{cmaname:this.ruleformcma.cmaname,cmadateOfIssue:this.ruleformcma.cmadateOfIssue,cmalicencsIssuing:this.ruleformcma.cmalicencsIssuing,cmatermOfValidity:this.ruleformcma.cmatermOfValidity,cmaimgsrc:this.ruleformcma.cmaimgsrc,cmadesc:this.ruleformcma.cmadesc}),n.set("status","Pending"),n.save().then((function(e){e&&(i.$message.success("添加成功"),i.active++,i.authenticationPreviewForm=i.authenticationForm,i.ruleForm1=i.ruleForm,i.ruleForm2=i.ruleformcma,i.previewother.otherform=u)}),(function(e){Object(o["returnLogin"])(e)}))}},updateOther:function(e){var t=this;this.$refs[e].validate((function(a){if(a){if(""==t.addotherform.imgsrc)return void t.$message.error("请上传资质照片");var r={title:t.otherForm.other,name:t.addotherform.name,dateOfIssue:t.addotherform.dateOfIssue,updatedDate:t.addotherform.updatedDate,initialRecognition:t.addotherform.initialRecognition,termOfValidity:t.addotherform.termOfValidity,licencsIssuing:t.addotherform.licencsIssuing,imgsrc:t.addotherform.imgsrc,desc:t.addotherform.desc};u.push(r),t.$refs[e].resetFields(),t.addotherform.imgsrc="",t.dialogVisible=!1}}))},addOther:function(){""==this.otherForm.other?this.$message.warning("请填写其他资质名称"):this.dialogVisible=!0},goBack:function(){this.active>1&&this.active<=3&&this.active--},handleModChange:function(e){},addEmpower:function(){var e=this;this.authenticationPreviewForm=this.authenticationForm,this.ruleForm1=this.ruleForm,this.ruleForm2=this.ruleformcma;var t=Parse.Object.extend("Authentication"),a=new t;a.id=this.ewpowerid,a.set("other",u),a.save().then((function(t){t&&(e.$message.success("提交成功"),e.allactive++)}))},cancelAdd:function(){this.allactive=1,this.active=1},getLaboratory:function(e){this.laboratorylist.push(e)},previewLaboratory:function(){0!=this.laboratorylist.length?(this.laboratoryFormvalue=this.laboratorylist[0].laboratoryForm.name,this.laboratoryactive=2):this.$message.error("请至少提交一个实验室认证")}}},p=m,f=(a("403d"),a("aed6"),a("2877")),h=Object(f["a"])(p,r,i,!1,null,"3b4ba748",null);t["default"]=h.exports},"90be":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"evidence_detail"},[a("div",{staticClass:"evidence_left"},[a("div",{staticClass:"left1"},[a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409eff","font-size":"14px",height:"40px",margin:"0"}},[e._v(" 取证产品信息 ")]),a("el-form",{ref:"productform",staticClass:"productform",attrs:{model:e.productform,"label-width":"120px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"检验编号:"}},[a("span",[e._v(e._s(e.taskform.pump_id))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"水泵名称:"}},[a("span")])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"水泵型号:"}},[a("span",[e._v(e._s(e.taskform.pump_use))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"水泵类型:"}},[a("span",[e._v(e._s(e.taskform.pump_model))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"检验标准:"}},[a("span",[e._v(e._s(e.taskform.datas.name))])])],1)],1)],1)],1),a("div",{staticClass:"left2"},[a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409eff","font-size":"14px",height:"40px",margin:"0"}},[e._v(" 取证设备信息 ")]),e._l(e.tableData,(function(t){return a("div",{key:t.id,staticClass:"devices1",staticStyle:{padding:"10px"}},[a("el-form",{attrs:{model:t,"label-position":"top"}},[a("el-row",{staticStyle:{"border-bottom":"1px solid #dddddd"}},[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{staticStyle:{width:"3rem",height:"3rem"},attrs:{"icon-class":"carams"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"设备名称"}},[a("span",[e._v(e._s(t.name))])])],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"设备统一编号"}},[a("span",[e._v(e._s(t.devaddr))])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"取证用途"}},[t.basedata.evidenceuse?a("span",[e._v(" "+e._s(t.basedata.evidenceuse)+" ")]):e._e(),a("span")])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"IP"}},[a("span",[e._v(e._s(t.basedata.ip))])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"MAC地址"}},[a("span",[e._v(e._s(t.basedata.mac))])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"生产厂家"}},[a("span",[e._v(e._s(t.basedata.factory))])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"投运时间"}},[a("span",[e._v(e._s(e.$dateFormat(t.createdAt)))])])],1)],1)],1)],1)}))],2),a("div",{staticClass:"left3"},[a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409eff","font-size":"14px",height:"40px",margin:"0"}},[e._v(" 取证设备信息 ")]),a("el-form",{attrs:{model:e.evidenceform,"label-position":"top"}},[a("div",{staticClass:"devices1",staticStyle:{padding:"10px"}},[a("el-row",{staticStyle:{"border-bottom":"1px solid #dddddd"}},[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{staticStyle:{width:"3rem",height:"3rem"},attrs:{"icon-class":"luxiang"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据类型"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"设证据编号"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据格式"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据大小"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据来源"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据数量"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"存储时间"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:1}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[e._v("预览")])],1)],1)],1),a("div",{staticClass:"devices1",staticStyle:{padding:"10px"}},[a("el-row",{staticStyle:{"border-bottom":"1px solid #dddddd"}},[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{staticStyle:{width:"3rem",height:"3rem"},attrs:{"icon-class":"dianzizhengju"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据类型"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"设证据编号"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据格式"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据大小"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据来源"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据数量"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"存储时间"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:1}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[e._v("预览")])],1)],1)],1),a("div",{staticClass:"devices1",staticStyle:{padding:"10px"}},[a("el-row",{staticStyle:{"border-bottom":"1px solid #dddddd"}},[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{staticStyle:{width:"3rem",height:"3rem"},attrs:{"icon-class":"tupian"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据类型"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"设证据编号"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据格式"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据大小"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据来源"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据数量"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"存储时间"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:1}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[e._v("预览")])],1)],1)],1),a("div",{staticClass:"devices1",staticStyle:{padding:"10px"}},[a("el-row",{staticStyle:{"border-bottom":"1px solid #dddddd"}},[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{staticStyle:{width:"3rem",height:"3rem"},attrs:{"icon-class":"video"}})],1)]),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据类型"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"设证据编号"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据格式"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据大小"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据来源"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"证据数量"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"存储时间"}},[a("span",[e._v("中央一号摄像头")])])],1),a("el-col",{attrs:{span:1}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[e._v("预览")])],1)],1)],1)])],1),a("div",{staticClass:"left4"},[a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409eff","font-size":"14px",height:"40px"}},[e._v(" 质检报告文件上传 ")]),a("el-form",{attrs:{model:e.reportform,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"质检报告:"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.reportform.filesrc,callback:function(t){e.$set(e.reportform,"filesrc",t)},expression:"reportform.filesrc"}},[a("template",{slot:"append"},[a("el-upload",{staticClass:"upload-demo",attrs:{limit:1,action:"https://jsonplaceholder.typicode.com/posts/",accept:".PDF"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选 择")])],1)],1)],2)],1)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("确定")]),a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("提交")]),a("el-button",{attrs:{type:"info",size:"small"}},[e._v("取消")])],1)]),a("div",{staticClass:"evidence_right"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"box_top"},[e._v("取证任务详情")]),a("div",{staticClass:"box_content"},[a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",size:"small","label-position":"left"}},[a("el-form-item",{attrs:{label:"检验编号"}},[a("span",[e._v(e._s(e.taskform.pump_id))])]),a("el-form-item",{attrs:{label:"委托方"}},[a("span",[e._v(e._s(e.taskform.factory))])]),a("el-form-item",{attrs:{label:"委托方联系人"}},[a("span",[e._v("{{}}")])]),a("el-form-item",{attrs:{label:"联系方式"}},[a("span",[e._v(e._s(e.taskform.entrust_phone))])]),a("el-form-item",{attrs:{label:"检测单位"}},[a("span",[e._v(e._s(e.taskform.detection_unit))])]),a("el-form-item",{attrs:{label:"检测实验室"}},[a("span",[e._v(e._s(e.taskform.lab))])]),a("el-form-item",{attrs:{label:"检测台"}},[a("span",[e._v(e._s(e.taskform.internal_num))])]),a("el-form-item",{attrs:{label:"检测人员"}},[a("span",[e._v(e._s(e.taskform.detection_unit))])]),a("el-form-item",{attrs:{label:"U盾序列号"}},[a("span",[e._v("{{}}")])]),a("el-form-item",{attrs:{label:"检测时间"}},[a("span",[e._v(e._s(e.taskform.test_time))])])],1)],1)])])],1)])},i=[],s=a("30f8"),o=a("019f"),n=a("c7f9"),l={data:function(){return{form:{},productform:{},devicesform:{},evidenceform:{},reportform:{filesrc:""},taskform:{datas:{name:""}},tableData:[]}},mounted:function(){},methods:{evidenceDetail:function(){var e=this,t=this.$route.query.taskid,a=Parse.Object.extend("PumpClient"),r=new Parse.Query(a);r.get(t).then((function(t){t&&(e.taskform=Object(o["default"])(t.attributes),e.evidenceDevice())}),(function(e){Object(s["returnLogin"])(e)}))},evidenceDevice:function(){var e=this,t={};t["basedata.laboratoryid"]=this.taskform.laboratory.id;var a={where:JSON.stringify(t)};Object(n["default"])("iotapi/classes/Device","GET",a).then((function(t){t&&(e.tableData=Object(o["default"])(t.results))})).catch((function(e){}))}}},c=l,d=(a("b0ef"),a("2877")),u=Object(d["a"])(c,r,i,!1,null,"363a31d3",null);t["default"]=u.exports},"930e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"testbedpump"},[a("Pumpdepartment",{staticStyle:{width:"360px",height:"100vh",overflow:"scroll","flex-shrink":"0",padding:"10px"},on:{pumpDetail:e.getPumpNode}}),a("div",{staticStyle:{width:"calc(100% - 360px)",padding:"20px"}},[a("div",{staticClass:"bedtop"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"检测台状态"}},[a("el-select",{attrs:{placeholder:"检测台状态"},model:{value:e.formInline.state,callback:function(t){e.$set(e.formInline,"state",t)},expression:"formInline.state"}},[a("el-option",{attrs:{label:"健康",value:"healthy"}}),a("el-option",{attrs:{label:"良好",value:"fine"}}),a("el-option",{attrs:{label:"一般",value:"commonly"}})],1)],1),a("el-form-item",{attrs:{label:"检测台"}},[a("el-input",{attrs:{placeholder:"检测台"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getBedtable(e.departmentid)}}},[e._v(" 查询 ")])],1)],1)],1),a("div",{staticClass:"bedtable"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.bedData,border:""},on:{"selection-change":e.handleSelectionBed}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",prop:"index",label:"序号",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"检测台名称",prop:"basedata.name",align:"center",width:"200"}}),a("el-table-column",{attrs:{label:"所属实验室",prop:"basedata.laboratory",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"检测台编号",prop:"basedata.number",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"检测台型号",prop:"basedata.model",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"生产厂家",prop:"basedata.factory",align:"center",width:"200"}}),a("el-table-column",{attrs:{label:"健康状况",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.basedata?a("p",["healthy"==t.row.basedata.state?a("span",[e._v("健康")]):"fine"==t.row.basedata.state?a("span",[e._v("良好")]):"commonly"==t.row.basedata.state?a("span",[e._v(" 一般 ")]):e._e()]):e._e()]}}])}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["init"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v(" 运行中 ")]):e._e(),"ONLINE"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"编辑",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.showUpdateDeviceForm(t.$index)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v(" 删除 ")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.devicesDetail(t.row)}}},[e._v(" 查看设备 ")])]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[1,5,10],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"addbeddialog"},[a("el-dialog",{attrs:{title:"测试台体"+e.actionTypeMap[e.actionType],visible:e.beddialog},on:{"update:visible":function(t){e.beddialog=t}}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("label",{attrs:{for:""}},[e._v("测试台名称:")]),a("el-input",{staticStyle:{width:"200px"},model:{value:e.testbedname,callback:function(t){e.testbedname=t},expression:"testbedname"}})],1),a("div",{staticClass:"devicecompany"},[a("el-form",{attrs:{model:e.devicelist,inline:!0}},[a("el-form-item",{attrs:{label:"检测单位:"}},[a("el-select",{on:{change:e.selectCompany},model:{value:e.devicelist.departmentid,callback:function(t){e.$set(e.devicelist,"departmentid",t)},expression:"devicelist.departmentid"}},e._l(e.departmentlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"检测单位:"}},[a("el-select",{model:{value:e.devicelist.testbedid,callback:function(t){e.$set(e.devicelist,"testbedid",t)},expression:"devicelist.testbedid"}},e._l(e.testbedlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})})),1)],1)],1)],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.devicesData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"100"}}),a("el-table-column",{attrs:{label:"设备类别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["DTU"==t.row.attributes.basedata.type?a("span",[e._v(" 控制器 ")]):"PC"==t.row.attributes.basedata.type?a("span",[e._v(" 控制台 ")]):a("span",[e._v("摄像头")])]}}])}),a("el-table-column",{attrs:{label:"设备编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),a("el-table-column",{attrs:{label:"当前状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v(" 离线 ")]):e._e(),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,50],"page-size":e.devicepagesize,total:e.devicetotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleDeviceSizeChange,"current-change":e.handleDeviceCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.beddialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addtestbed(e.testbedid)}}},[e._v(" 确 定 ")])],1)],1)],1)]),a("el-dialog",{attrs:{title:e.testbedname+"的设备",visible:e.bedDevicedialog,width:"80%"},on:{"update:visible":function(t){e.bedDevicedialog=t}}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"deviceheader"},[a("div",{staticClass:"headerone"},[e._v("网关设备")]),a("div",{staticClass:"headertwo"},[e._v("网络层级:2")]),a("div",{staticClass:"headerthree"},[e._v("网关编号:11223334455")]),a("div",{staticClass:"headerfourth"},[e._v(" 网关状态: "),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.gatewaystatus,callback:function(t){e.gatewaystatus=t},expression:"gatewaystatus"}})],1)]),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center","margin-top":"20px"},attrs:{data:e.bedDevicesData,border:""}},[a("el-table-column",{attrs:{label:"设备类别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),a("el-table-column",{attrs:{label:"网络设备编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),a("el-table-column",{attrs:{label:"设备厂商",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.factory))])]}}])}),a("el-table-column",{attrs:{label:"通信协议",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.agreement))])]}}])}),a("el-table-column",{attrs:{label:"网络层级",align:"center"}}),a("el-table-column",{attrs:{label:"设备状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v(" 离线 ")]):e._e(),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"投运时间",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"}})],1)],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"devicetwo"},[a("div",{staticClass:"devicetwoone"},[e._v("传感器")]),a("div",{staticClass:"devicetwotwo"},[e._v("传感器数量:6")]),a("div",{staticClass:"devicetwothree"},[e._v("在线设备:10")]),a("div",{staticClass:"devicetwofourth"},[e._v("故障设备:2")])]),a("el-table",{ref:"multipleTable1",staticStyle:{width:"100%","text-align":"center","margin-top":"20px"},attrs:{data:e.bedDevicesData},on:{"selection-change":e.deviceSelect}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"传感器名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),a("el-table-column",{attrs:{label:"传感器编码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),a("el-table-column",{attrs:{label:"设备厂家",align:"center"}}),a("el-table-column",{attrs:{label:"设备型号",align:"center"}}),a("el-table-column",{attrs:{label:"设备协议",align:"center"}}),a("el-table-column",{attrs:{label:"网络层级",align:"center"}}),a("el-table-column",{attrs:{label:"内网编号",align:"center"}}),a("el-table-column",{attrs:{label:"最新采集时间",align:"center"}}),a("el-table-column",{attrs:{label:"当前状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v(" 离线 ")]):e._e(),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.bedDevicedialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bedDevicedialog=!1}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{title:"检测台"+e.actionTypeMap[e.actionType],visible:e.addbeddialogNew,width:"50%"},on:{"update:visible":function(t){e.addbeddialogNew=t},open:e.diologOpen}},[a("div",[a("el-form",{ref:"addbedFormRef",staticClass:"demo-ruleForm",attrs:{model:e.addbedForm,rules:e.addbedFormrule,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"检测台名称",prop:"name"}},[a("el-input",{model:{value:e.addbedForm.name,callback:function(t){e.$set(e.addbedForm,"name",t)},expression:"addbedForm.name"}})],1),a("el-form-item",{attrs:{label:"检测台编号"}},[a("el-input",{model:{value:e.addbedForm.number,callback:function(t){e.$set(e.addbedForm,"number",t)},expression:"addbedForm.number"}})],1),a("el-form-item",{attrs:{label:"生产厂家"}},[a("el-input",{model:{value:e.addbedForm.factory,callback:function(t){e.$set(e.addbedForm,"factory",t)},expression:"addbedForm.factory"}})],1),a("el-form-item",{attrs:{label:"控制台信息"}},[e.addbedForm.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.addbedForm.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px",opacity:"0","z-index":"5",height:"200px",width:"200px",cursor:"pointer"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})])])],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"网关选择",prop:"product"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择台体所属网关"},model:{value:e.addbedForm.product,callback:function(t){e.$set(e.addbedForm,"product",t)},expression:"addbedForm.product"}},e._l(e.productlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",{attrs:{label:"所属实验室",prop:"laboratory"}},[a("el-select",{attrs:{placeholder:"请选择所属实验室"},model:{value:e.addbedForm.laboratory,callback:function(t){e.$set(e.addbedForm,"laboratory",t)},expression:"addbedForm.laboratory"}},[a("el-option",{key:"99",attrs:{value:99,label:"实验室1"}}),e._l(e.departmentList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})}))],2)],1),a("el-form-item",{attrs:{label:"测试台型号"}},[a("el-input",{model:{value:e.addbedForm.model,callback:function(t){e.$set(e.addbedForm,"model",t)},expression:"addbedForm.model"}})],1),a("el-form-item",{attrs:{label:"测试台状况",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择测试台状况"},model:{value:e.addbedForm.state,callback:function(t){e.$set(e.addbedForm,"state",t)},expression:"addbedForm.state"}},[a("el-option",{attrs:{label:"健康",value:"healthy"}}),a("el-option",{attrs:{label:"良好",value:"fine"}}),a("el-option",{attrs:{label:"一般",value:"commonly"}})],1)],1),a("el-form-item",{attrs:{label:"备注信息"}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.addbedForm.desc,callback:function(t){e.$set(e.addbedForm,"desc",t)},expression:"addbedForm.desc"}})],1)],1)])],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("计算机配置")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计算机名称"}},[a("el-select",{attrs:{placeholder:"请选择计算机名称"},model:{value:e.addbedForm.computername,callback:function(t){e.$set(e.addbedForm,"computername",t)},expression:"addbedForm.computername"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计算机key"}},[a("el-select",{attrs:{placeholder:"请选择计算机key"},model:{value:e.addbedForm.computerkey,callback:function(t){e.$set(e.addbedForm,"computerkey",t)},expression:"addbedForm.computerkey"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addbeddialogNew=!1}}},[e._v("取 消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"update"==e.actionType,expression:"actionType == 'update'"}],attrs:{type:"primary"},on:{click:e.doUpdateDevice}},[e._v(" 确 定 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"add"==e.actionType,expression:"actionType == 'add'"}],attrs:{type:"primary"},on:{click:function(t){return e.Determine("addbedForm")}}},[e._v(" 确 定 ")])],1)]),a("el-dialog",{attrs:{visible:e.disposeVisible,title:"提示",width:"50%"},on:{"update:visible":function(t){e.disposeVisible=t}}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.bedForm,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入测试台名称搜索"},model:{value:e.bedForm.name,callback:function(t){e.$set(e.bedForm,"name",t)},expression:"bedForm.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getAllBed}},[e._v("搜 索")])],1)],1)],1),a("div",{staticClass:"dispose",staticStyle:{display:"flex"}},[a("el-card",{staticClass:"box-card",staticStyle:{width:"45%",height:"300px","overflow-y":"scroll"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("测试台体")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clearUBed}},[e._v(" 清空 ")])],1),e._l(e.alltestbed,(function(t,r){return a("div",{key:r,staticClass:"text item"},[a("el-radio",{attrs:{label:t.id},model:{value:e.updatedId,callback:function(t){e.updatedId=t},expression:"updatedId"}},[e._v(" "+e._s(t.attributes.name)+" ")])],1)}))],2),a("div",{staticStyle:{margin:"0 20px","text-align":"center"}},[a("span",{staticClass:"svg-container",staticStyle:{"line-height":"300px"}},[a("svg-icon",{staticStyle:{width:"3rem",height:"3rem"},attrs:{"icon-class":"relation"}})],1)]),a("el-card",{staticClass:"box-card",staticStyle:{width:"45%",height:"300px","overflow-y":"scroll"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("实验仪器")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.handleCheckAllChange}},[e._v(" 全选 ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clearUpDevice}},[e._v(" 清空 ")])],1),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkdevice,callback:function(t){e.checkdevice=t},expression:"checkdevice"}},e._l(e.allpumpdevice,(function(t,r){return a("el-checkbox",{key:r,staticStyle:{display:"block"},attrs:{label:t.id}},[e._v(" "+e._s(t.attributes.devaddr)+" ")])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.disposeVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addTestRelation}},[e._v("确 定")])],1)])],1)},i=[],s=(a("4de4"),a("b0c0"),a("7db0"),a("d81d"),a("ac1f"),a("1276"),a("c19f"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f81"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("3ca3"),a("ddb0"),a("caad"),a("2532"),a("a9e3"),a("5d75")),o=a("30f8"),n={components:{Pumpdepartment:s["default"]},data:function(){return{testbedSelection:[],disposeVisible:!1,addbedForm:{name:"",state:"",laboratory:"",factory:"",number:"",imgsrc:"",desc:"",product:"",computername:"",computerkey:"",model:""},addbedFormrule:{name:[{required:!0,message:"请输入测试台名称",trigger:"blur"}],laboratory:[{required:!0,message:"请选择所属实验室",trigger:"change"}],state:[{required:!0,message:"请选择测试台状况",trigger:"change"}],product:[{required:!0,message:"请选择测试台网关",trigger:"change"}]},addbeddialogNew:!1,formInline:{laboratory:"",name:"",state:""},gatewaystatus:!1,bedData:[],devicesData:[],beddialog:!1,multipleSelection:[],testbedname:"",testbedid:"",testbeddevices:[],origindevices:[],pagesize:10,total:0,start:0,devicelist:{departmentid:"",testbedid:""},departmentid:"",devicesstart:0,bedDevicedialog:!1,devicepagesize:10,devicestart:0,devicetotal:0,bedDevicesData:[],multipleTable1:[],testbedlist:[],departmentList:[],departmentlist:[],alltestbed:[],allpumpdevice:[],updatedId:"",checkdevice:[],bedForm:{name:""},productlist:[],actionTypeMap:{add:"新增",update:"更新"},actionType:"",curDeviceId:""}},mounted:function(){this.getDepartmentList(),this.getDevices()},methods:{getDevices:function(){var e=this;this.$axiosWen.get("iotapi/classes/Device",{params:{include:"product",order:"-createdAt",where:{}}}).then((function(t){t&&t.results?e.bedData=t.results.filter((function(e){return"shuwa_iot_hub"==e.product.devType})):e.bedData=[]})).catch((function(e){})),this.$axiosWen.get("iotapi/classes/Product").then((function(t){t&&t.results&&(e.productlist=t.results)}))},getAllBed:function(){var e=this,t=Parse.Object.extend("Testbed"),a=new Parse.Query(t);a.ascending(["-createdAt","name"]),a.limit(1e3),""!=this.bedForm.name&&a.matches("name",this.bedForm.name,"i"),a.find().then((function(t){e.alltestbed=t}),(function(e){Object(o["returnLogin"])(e)}))},getAllPumpDevice:function(){var e=this,t=Parse.Object.extend("PumpDevice"),a=new Parse.Query(t);a.equalTo("basedata.type","PUMP_DTU"),a.ascending("createdAt"),a.limit(1e3),a.find().then((function(t){e.allpumpdevice=t}),(function(e){Object(o["returnLogin"])(e)}))},handleCheckedCitiesChange:function(e){},clearUBed:function(){this.updatedId=""},handleCheckAllChange:function(e){var t=this;this.allpumpdevice.map((function(e){t.checkdevice.push(e.id)}))},testBedAdd:function(){this.actionType="add",this.addbedForm={},this.addbeddialogNew=!0},diologOpen:function(){var e=this;setTimeout((function(){e.$refs["addbedFormRef"].resetFields()}),100)},clearUpDevice:function(){this.checkdevice=[]},addTestRelation:function(){var e=this,t=Parse.Object.extend("Testbed"),a=new t,r=Parse.Object.extend("PumpDevice"),i=new r;if(""!=this.updatedId){a.id=this.updatedId;var s=a.relation("devices");this.checkdevice.map((function(e){i.set("objectId",e),s.add(i)})),a.save().then((function(t){t&&(e.$message.success("设备关联成功"),e.disposeVisible=!1,e.checkdevice=[],e.updatedId="",e.getBedtable(e.departmentid))}),(function(e){Object(o["returnLogin"])(e)}))}},getDepartmentList:function(){var e=this,t=Parse.Object.extend("PumpDepartment"),a=new Parse.Query(t);a.equalTo("org_type","实验室"),a.find().then((function(t){e.departmentList=t}),(function(e){Object(o["returnLogin"])(e)}))},Determine:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return t.$message.error("有必填项未填写"),!1;if(""!=t.addbedForm.imgsrc){var r=Parse.Object.extend("Testbed"),i=new r,s=Parse.Object.extend("PumpDepartment"),n=new s;n.id=t.addbedForm.laboratory,i.set("department",n),i.set("status","init"),i.set("name",t.addbedForm.name),i.set("model",t.addbedForm.model),i.set("number",t.addbedForm.number),i.set("factory",t.addbedForm.factory),i.set("state",t.addbedForm.state),i.set("imgsrc",t.addbedForm.imgsrc),i.set("deviceaddr",t.addbedForm.product),i.save().then((function(a){a&&(t.$message.success("测试台体新增成功"),t.$refs[e].resetFields(),t.addbeddialogNew=!1,t.getBedtable(t.departmentid))}),(function(e){Object(o["returnLogin"])(e)}))}else t.$message.error("请上传测试台信息")}))},showUpdateDeviceForm:function(e){this.actionType="update";var t=this.bedData[e],a=t["basedata"];a||(a={}),t["objectId"]?this.curDeviceId=t["objectId"]:this.curDeviceId="",this.addbedForm={name:a.name,state:a.state,laboratory:a.laboratory,factory:a.factory,number:a.number,imgsrc:a.imgsrc,desc:a.desc,computername:a.computername,computerkey:a.computerkey,model:a.model},this.addbedForm.product=t.product.objectId,this.addbeddialogNew=!0},doUpdateDevice:function(){var e=this;this.curDeviceId?this.$refs["addbedFormRef"].validate((function(t){if(!t)return e.$message.error("有必填项未填写"),!1;""!=e.addbedForm.imgsrc?e.$axiosWen.put("classes/Device/"+e.curDeviceId,{basedata:e.addbedForm}).then((function(t){e.addbeddialogNew=!1,e.$message({type:"success",message:"更新成功!"}),e.getDevices()})).catch((function(e){})):e.$message.error("请上传测试台信息")})):this.$message.error("curDeviceId null")},upload:function(e){if(e){var t=e.target.files[0],a=t.name,r=e.target.files[0].type,i=(t.type.split("/")[0],"image/jpeg"===r||"image/JPEG"===r||"image/png"===r||"image/PNG"===r||"image/bpm"===r||"image/BPM"===r);if(!i)return this.$message({message:"只能上传图片文件",type:"error"}),!1;var s=new FileReader;s.readAsDataURL(t);var o=this;s.onloadend=function(){var e=s.result,t=o.dataURItoBlob(e);o.uploadFile(t,a)}}},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return new Blob([r],{type:a})},uploadFile:function(e,t){var a=this,r=new FormData;r.append("file",e,t),r.append("output","json"),r.append("path",this.$Cookies.get("appids")),r.append("scene",this.$Cookies.get("appids")),r.append("auth_token",this.$Cookies.get("access_token_pump"));this.$http.post(this.$Cookies.get("fileserver"),r).then((function(e){e&&(a.addbedForm.imgsrc=e.body.url)})).catch((function(e){a.$message.error(e)}))},getPumpNode:function(e){this.departmentid=e.objectId,this.getBedtable(this.departmentid)},devicesDetail:function(e){var t=e["devaddr"];this.$router.push({path:"/devicemanage/evidence_devices",query:{devaddr:t}})},disposeTestbed:function(){this.disposeVisible=!0},handleEdit:function(e){var t=this;this.testbedid=e,this.disposeVisible=!0;var a=Parse.Object.extend("Testbed"),r=new Parse.Query(a),i=Parse.Object.extend("PumpDevice"),s=new Parse.Query(i);this.updatedId=e,r.get(e).then((function(e){var a=e.relation("devices"),r=a.query();s.equalTo("basedata.type","PUMP_DTU"),s.ascending("createdAt"),t.devicesData=s,r.find().then((function(e){e.map((function(e){t.checkdevice.push(e.id)}))}))}))},selectCompany:function(e){var t=this;this.devicelist.testbedid="";var a=Parse.Object.extend("PumpDepartment"),r=new Parse.Query(a);r.equalTo("ParentId",e),r.find().then((function(e){t.testbedlist=e}))},deviceSelect:function(e){this.multipleTable1=e},handleDeviceSizeChange:function(e){this.devicepagesize=e,""!=this.testbedid?this.handleEdit(this.testbedid):this.addTest()},handleDeviceCurrentChange:function(e){this.devicestart=(e-1)*this.devicepagesize,""!=this.testbedid?this.handleEdit(this.testbedid):this.addTest()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除当前测试台体, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=Parse.Object.extend("Testbed"),r=new Parse.Query(a);r.get(e).then((function(e){e.destroy().then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getBedtable(t.departmentid)}))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getBedtable:function(e){var t=this,a=Parse.Object.extend("Testbed"),r=new Parse.Query(a);r.limit(this.pagesize),r.skip(this.start),r.ascending(["-createdAt","name"]),e&&r.equalTo("department",e),""!=this.formInline.state&&r.equalTo("state",this.formInline.state),""!=this.formInline.name&&r.equalTo("name",this.formInline.name),this.formInline.laboratory&&r.equalTo("department",this.formInline.laboratory),r.count().then((function(e){t.total=e,r.find().then((function(e){t.bedData=e}))}))},addTest:function(){var e=this;this.testbedid="",this.beddialog=!0;var t=Parse.Object.extend("PumpDevice"),a=new Parse.Query(t);a.equalTo("basedat.type","PUMP_DTU"),a.skip(this.devicestart),a.limit(this.devicepagesize),a.count().then((function(t){e.devicetotal=t,a.find().then((function(t){e.devicesData=t}),(function(e){}))}));var r=Parse.Object.extend("PumpDepartment"),i=new Parse.Query(r);i.equalTo("org_type","泵单位"),i.find().then((function(t){e.departmentlist=t}))},handleSelectionBed:function(e){this.testbedSelection=e},deleteTestBed:function(){var e=this,t=[];0!=this.testbedSelection.length?this.$confirm("此操作将永久删除选中检测台体, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.testbedSelection.map((function(a){t.push(new Promise((function(e,t){var r=Parse.Object.extend("Testbed"),i=new r;return i.id=a.id,i.destroy().then((function(t){e(t)}),(function(e){t(e.message)}))}))),Promise.all(t).then((function(t){e.$message({message:"删除成功",type:"success"}),t.length==e.testbedSelection.length&&e.getBedtable(e.departmentid)})).catch((function(t){e.$message({message:t,type:"error"})}))}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$message.warning("请勾选要删除的检测台体")},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.map((function(e){t.multipleSelection.push(e.id)}))},addtestbed:function(e){var t=this;if(""==e){var a=Parse.Object.extend("Testbed"),r=new a;r.set("name",this.testbedname),r.set("status","init");var i=r.relation("devices"),s=Parse.Object.extend("PumpDevice"),o=new s,n=Parse.Object.extend("PumpDepartment"),l=new n;l.id=this.devicelist.testbedid,r.set("department",l),this.multipleSelection.map((function(e){o.set("objectId",e),i.add(o)})),r.save().then((function(e){t.$message({message:"添加成功",type:"success"}),t.beddialog=!1,t.getBedtable(t.departmentid),t.testbedname=""}))}else{a=Parse.Object.extend("Testbed"),r=new Parse.Query(a);r.get(e).then((function(e){e.set("name",t.testbedname);var a=e.relation("devices"),i=Parse.Object.extend("PumpDevice"),s=new i,o=Parse.Object.extend("PumpDepartment"),n=new o;n.id=t.devicelist.testbedid,r.set("department",n),t.multipleSelection.map((function(e){t.testbeddevices.includes(e)||(s.set("objectId",e),a.add(s)),t.testbeddevices.map((function(e){t.multipleSelection.includes(e)||(s.set("objectId",e),a.remove(s))}))})),e.save().then((function(e){t.$message({message:"修改成功",type:"success"}),t.beddialog=!1,t.getBedtable(t.departmentid)}))}))}},handleSizeChange:function(e){this.pagesize=e,this.getBedtable(this.departmentid)},handleCurrentChange:function(e){this.start=Number(e-1)*Number(this.pagesize),this.getBedtable(this.departmentid)}}},l=n,c=(a("0ccd"),a("da40"),a("2877")),d=Object(c["a"])(l,r,i,!1,null,"4a072984",null);t["default"]=d.exports},9612:function(e,t,a){},9616:function(e,t,a){},9974:function(e,t,a){},"9a67":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"PerformanceDataCurve"},[e._m(0),a("div",{ref:"chartViewTop",staticClass:"view-chart-box"},[e._v("Click to bind data.")]),a("h3",{staticStyle:{"text-align":"center"}},[e._v("性能曲线")])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("br")])}],s=a("5530"),o=(a("159b"),a("164e")),n=a.n(o),l=a("5880"),c=a("eb2f"),d={name:"PerformanceDataCurve",components:{},data:function(){return{chartOption:{},xAxisDataArray:[],dataArrayLift:[],dataArrayPower:[],dataArrayEfficiency:[],testData:[]}},computed:Object(s["a"])({},Object(l["mapState"])({currentTask:function(e){return e.deviceData.currentTask},currentChildPageData:function(e){return e.deviceData.currentChildPageData}})),created:function(){},mounted:function(){var e=this;c["eventBus"].$on("itemChange",(function(t){e.resetOption(),e.testData=t,e.processData(t),setTimeout((function(){e.drawLine(),e.getData()}),200)})),this.$nextTick((function(){var t=e.$refs.chartViewTop;e.chartTop=n.a.init(t),e.drawLine()}))},beforeDestroy:function(){this.resetOption()},methods:{initData:function(){},processData:function(e){var t=[],a=[],r=[],i=[];e.forEach((function(e){t.push(e.Q2),a.push(e.H2),r.push(e.W2),i.push(e.Eff)})),this.xAxisDataArray=t,this.dataArrayLift=a,this.dataArrayPower=r,this.dataArrayEfficiency=i},drawLine:function(){this.chartOption={tooltip:{trigger:"axis"},legend:{data:["扬程","功率","效率"]},xAxis:[{type:"category",boundaryGap:!1,data:this.xAxisDataArray},{type:"value",scale:!0,splitNumber:29,axisLabel:{show:!1},splitLine:{show:!1}}],yAxis:[{type:"value",name:"扬程H/m",position:"left",axisLabel:{formatter:"{value}  H/m"}},{type:"value",name:"功率(kW)",position:"right",offset:50,axisLabel:{formatter:"{value}"}},{type:"value",name:"效率(%)",position:"right",axisLabel:{formatter:"{value}"}}],animation:!1,series:[{name:"扬程",type:"line",smooth:!0,data:this.dataArrayLift},{name:"效率",type:"line",smooth:!0,data:this.dataArrayPower},{name:"功率",type:"line",smooth:!0,data:this.dataArrayEfficiency}]},this.chartTop.setOption(this.chartOption)},resetOption:function(){this.chartTop.clear(),this.xAxisDataArray=[],this.dataArrayLift=[],this.dataArrayPower=[],this.dataArrayEfficiency=[]}}},u=d,m=(a("f954"),a("2877")),p=Object(m["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},"9e62":function(e,t,a){},a57f:function(e,t,a){"use strict";a("6dbf")},a759:function(e,t,a){"use strict";a("0706")},a939:function(e,t,a){"use strict";a("647f4")},a9c5:function(e,t,a){},aed6:function(e,t,a){"use strict";a("0b2e")},afa3:function(e,t,a){"use strict";a("4afb")},b0ef:function(e,t,a){"use strict";a("1bbe")},b244:function(e,t,a){"use strict";a("a9c5")},b3e2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index"},[e._v(e._s(e.pageTitle))])},i=[],s={name:"Index",components:{},data:function(){return{pageTitle:"index"}},computed:{},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}},o=s,n=(a("0076"),a("2877")),l=Object(n["a"])(o,r,i,!1,null,"7b74c44e",null);t["default"]=l.exports},b91d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reportmodule"},[a("div",{staticClass:"add"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addmodule}},[e._v("新 增")])],1),a("div",{staticClass:"reportlist"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:"产品名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.sample))])]}}])}),a("el-table-column",{attrs:{label:"检验类别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.category))])]}}])}),a("el-table-column",{attrs:{label:"检验标准",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.inspection_standard))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row.objectId)}}},[e._v(" 详 情 ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editorDetail(t.row.objectId)}}},[e._v(" 编 辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.objectId)}}},[e._v(" 删 除 ")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-sizes":[5,10,20],"page-size":e.length,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticStyle:{padding:"20px","box-sizing":"border-box"},attrs:{visible:e.dialogTableVisible,title:"模板详情",width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.gridData,border:""}},[a("el-table-column",{attrs:{label:"id",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{label:"检验项目",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.inspecting))]}}])}),a("el-table-column",{attrs:{property:"title",label:"保证值",align:"center"}}),a("el-table-column",{attrs:{property:"value",label:"测试值",align:"center"}}),a("el-table-column",{attrs:{property:"",label:"评定",align:"center"}})],1)],1)],1)},i=[],s=(a("a9e3"),a("973c")),o=a("be65"),n=a.n(o),l={data:function(){return{tableData:[],total:0,start:0,length:10,dialogTableVisible:!1,gridData:[]}},mounted:function(){this.reportList()},methods:{addmodule:function(){this.$router.push({path:"/reportmodule/module"})},handleEdit:function(e){var t=this;this.dialogTableVisible=!0,Object(s["getReportdetail"])(e).then((function(e){t.gridData=e.data.inspecting})).catch((function(e){}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除此检验标准, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=Parse.Object.extend("Datas"),r=new Parse.Query(a);r.get(e).then((function(e){e.destroy().then((function(e){t.$message({type:"success",message:"删除成功!"}),t.reportList()}),(function(e){}))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},reportList:function(){var e=this;Object(s["getReport"])(this.start,this.length).then((function(t){e.tableData=t.data,e.total=t.data.length}))},handleSizeChange:function(e){this.pagesize=e,this.reportList(this.start,this.pagesize)},handleCurrentChange:function(e){this.start=Number(e-1)*Number(this.pagesize),this.reportList(this.start,this.pagesize)},editorDetail:function(e){this.$router.push({path:"/reportmodule/module",query:{id:e}}),n.a.set("reportId",e)}}},c=l,d=(a("f271"),a("28c0"),a("2877")),u=Object(d["a"])(c,r,i,!1,null,"36b3fb7e",null);t["default"]=u.exports},bbd4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"loginbanner"},[a("el-form",{ref:"ruleForm2",staticClass:"login-form",attrs:{model:e.ruleForm2,rules:e.rules2,"status-icon":"","label-width":"100px"}},[a("div",{staticClass:"logo"},[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.logosrc,alt:"logo"}}),a("p",[e._v(e._s(e.title))])]),a("el-form-item",{staticStyle:{"border-radius":"0"},attrs:{prop:"phone"}},[a("span",{staticClass:"svg-container"},[a("el-select",{staticStyle:{border:"0"},attrs:{placeholder:"请选择手机区域"},model:{value:e.ruleForm2.value,callback:function(t){e.$set(e.ruleForm2,"value",t)},expression:"ruleForm2.value"}},e._l(e.ruleForm2.diqu,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-input",{ref:"phonerole",staticStyle:{width:"250px"},attrs:{maxlength:11,name:"phone",type:"text","auto-complete":"on",placeholder:"请输入手机号"},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1),a("div",{staticClass:"yzm",staticStyle:{height:"50px","margin-bottom":"20px","margin-left":"20px"}},[a("span",{staticClass:"svg-container",staticStyle:{float:"left",width:"25%"}},[a("el-input",{staticStyle:{width:"100%",border:"1px solid #cccccc","border-right":"0px","border-radius":"0"},attrs:{type:"text",disabled:""},model:{value:e.phonesms,callback:function(t){e.phonesms=t},expression:"phonesms"}})],1),a("el-input",{staticClass:"yzm",staticStyle:{float:"left",width:"50%",border:"1px solid #cccccc","border-radius":"0"},attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.code,callback:function(t){e.code=e._n(t)},expression:"code"}}),a("el-button",{staticStyle:{float:"right",width:"25%",height:"47px",padding:"12px 15px 12px 15px","border-radius":"0"},attrs:{disabled:e.sendMsgDisabled,type:"primary"},on:{click:e.send}},[e.sendMsgDisabled?a("span",[e._v(e._s(e.time+"秒后获取"))]):e._e(),e.sendMsgDisabled?e._e():a("span",[e._v("发送验证码")])])],1),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{staticStyle:{width:"100%","letter-spacing":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm2")}}},[e._v(" 确 定 ")])],1),a("div",{staticClass:"hasuser"},[a("span",{staticStyle:{"font-size":"14px",color:"#409eff",cursor:"pointer"},on:{click:e.login}},[e._v(" 账号密码登陆 ")]),a("span",{staticStyle:{float:"right","font-size":"14px",color:"#777777",cursor:"pointer"},on:{click:e.skip}},[e._v(" 进入 ")])])],1)],1)])},i=[],s=(a("d81d"),a("d3b7"),a("25f0"),a("8665")),o=a("be65"),n=a.n(o),l=a("f43e").Base64,c={data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入密码")):(/^\w{6,10}$/.test(t)||a(new Error("密码格式不正确")),a())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.ruleForm2.password?r(new Error("两次输入密码不一致!")):r()};return{phonesms:"手机验证码",time:60,sendMsgDisabled:!1,code:"",actions:"",routes:[],logosrc:"",title:"",ruleForm2:{account:"",phone:"",username:"",password:"",email:"",checkPass:"",diqu:[],value:"+86/中国",time:0},origin:["+86/中国","+886/中国台湾","+852/中国香港","+91/India","+244/Angola","+54/Argentina","+1/American Samoa","+880/Bangladesh","+56/Chile","+855/Cambodia","+20/Egypt","+33/France","+49/Germany","+62/Indonesia","+353/Ireland","+972/Israel","+39/Italy","+81/Japan","+60/Malaysia","+63/Philippines","+92/Pakistan","+82/South Korea","+46/Sweden","+65/Singapore","+27/South Africa","+66/Thailand","+971/United Arab Emirates","+44/United Kingdom","+1/United States","+84/Vietnam","+967/Yemen","+260/Zambia"],rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,a){var r=/^1[34578]\d{9}$/;r.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],password:[{validator:t,trigger:"blur",required:!0}],checkPass:[{validator:a,trigger:"blur",required:!0}],username:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:5,message:"姓名格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},phonetoken:""}},mounted:function(){var e=this,t=/^1[34578]\d{9}$/;this.$route.query.phone&&t.test(l.decode(this.$route.query.phone))&&(this.ruleForm2.phone=l.decode(this.$route.query.phone),this.$refs["phonerole"].$refs.input.disabled=!0),this.ruleForm2.diqu=[],this.actions=this.$route.query.action,this.origin.map((function(t){e.ruleForm2.diqu.push({label:t,value:t.toString()})})),this.title=sessionStorage.getItem("product_title"),this.logosrc=sessionStorage.getItem("imgsrc"),this.phonetoken=n.a.get("sessionToken")},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},login:function(){this.$router.push({path:"/login"})},submitForm:function(e){var t=/^1[34578]\d{9}$/,a=this;a.$refs[e].validate((function(e){if(!e||!t.test(a.ruleForm2.phone))return a.$message({message:"信息错误",type:"error"}),!1;Object(s["Verify"])(a.actions,a.ruleForm2.phone,a.code).then((function(e){})).catch((function(e){a.$message(e)}))}))},send:function(){var e=this,t=/^1[34578]\d{9}$/,a=this;if(t.test(a.ruleForm2.phone)){a.sendMsgDisabled=!0,Object(s["Phonelogin"])(a.ruleForm2.phone,encodeURIComponent(a.ruleForm2.value)).then((function(t){e.$message({message:"发送成功",type:"success"}),e.time=t.expire})).catch((function(t){e.$message(t)}));var r=window.setInterval((function(){a.time--<=0&&(a.time=60*this.time,a.sendMsgDisabled=!1,window.clearInterval(r))}),1e3)}else this.$message({message:"请输入正确的手机号",type:"warning"})}}},d=c,u=(a("4b21"),a("a759"),a("2843"),a("2877")),m=Object(u["a"])(d,r,i,!1,null,"0285f121",null);t["default"]=m.exports},c11c:function(e,t,a){},c2a7:function(e,t,a){"use strict";a("0a7c")},c355:function(e,t,a){"use strict";a("23f6")},c69d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CompanyAuthentication"},[a("h3",[e._v("企业资质审核")]),a("div",{staticClass:"CompanyAuthentication_top"},[a("div",{staticClass:"pump_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"cell-style":e.rowClass,"header-cell-style":e.headClass,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{label:"企业名称",prop:"data.CompanyAuthentication.abbrname"}}),a("el-table-column",{attrs:{label:"统一社会信用代码",prop:"data.CompanyAuthentication.creditcode"}}),a("el-table-column",{attrs:{label:"法定代表人姓名",width:"150",prop:"data.CompanyAuthentication.businessname"}}),a("el-table-column",{attrs:{label:"法定代表人身份证号码",prop:"data.CompanyAuthentication.identity"}}),a("el-table-column",{attrs:{label:"注册地址",prop:"data.CompanyAuthentication.addr"}}),a("el-table-column",{attrs:{label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{prop:"data.Laboratory.laboratoryInfo.name",label:"实验室名称"}}),a("el-table-column",{attrs:{label:"审核日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.auditDate))])]}}])}),a("el-table-column",{attrs:{label:"审核状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"info"}},[e._v(" 待审核 ")]):1==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"success"}},[e._v(" 审核通过 ")]):2==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"danger"}},[e._v(" 审核未通过 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"审核意见",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.suggestion))])]}}])}),a("el-table-column",{attrs:{width:"150",label:"审核管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.lookUp(t.row)}}},[e._v(" 查看 ")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.examine(t.row)}}},[e._v(" 审核 ")])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-sizes":[10,200,30,50],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"认证审核",width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"verifyFormRef",attrs:{model:e.verifyForm,rules:e.verifyFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核状态",prop:"status"}},[a("el-radio-group",{model:{value:e.verifyForm.status,callback:function(t){e.$set(e.verifyForm,"status",t)},expression:"verifyForm.status"}},[a("el-radio",{attrs:{label:0}},[e._v("待审核")]),a("el-radio",{attrs:{label:2}},[e._v("审核未通过")]),a("el-radio",{attrs:{label:1}},[e._v("审核通过")])],1)],1),a("el-form-item",{attrs:{label:"审核意见",prop:"suggestion"}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.verifyForm.suggestion,callback:function(t){e.$set(e.verifyForm,"suggestion",t)},expression:"verifyForm.suggestion"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("verifyFormRef")}}},[e._v(" 提 交 ")])],1)]),e.dialogFormVisible?a("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"企业资质审核",width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"认证信息",name:"first"}},[a("el-form",{attrs:{"label-width":"160px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.abbrname)}})],1),a("el-form-item",{attrs:{label:"企业简称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessname)}})],1),a("el-form-item",{attrs:{label:"法人代表名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.corporname)}})],1),a("el-form-item",{attrs:{label:"法人代表身份证"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.CompanyAuthentication.contraryimageUrl}})]),a("el-form-item",{attrs:{label:"注册地址"}},[a("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.regionData},model:{value:e.currentRow.data.CompanyAuthentication.addr,callback:function(t){e.$set(e.currentRow.data.CompanyAuthentication,"addr",t)},expression:"currentRow.data.CompanyAuthentication.addr"}})],1),a("el-form-item",{attrs:{label:"营业年限"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessduration+"年")}})],1),a("el-form-item",{attrs:{label:"注册资金"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.registeredcapital)}})],1),a("el-form-item",{attrs:{label:"企业描述"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessdesc)}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业英文名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.englishname)}})],1),a("el-form-item",{attrs:{label:"统一社会信用代码"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.creditcode)}})],1),a("el-form-item",{attrs:{label:"法人代表身份证号"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.identity)}})],1),a("el-form-item",{attrs:{label:"企业营业执照"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.CompanyAuthentication.businesslicense}})]),a("el-form-item",{attrs:{label:"街道地址"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.roadress)}})],1),a("el-form-item",{attrs:{label:"企业规模"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.region)}})],1),a("el-form-item",{attrs:{label:"经营范围"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessscope)}})],1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"实验室信息",name:"third"}},[a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实验室名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.name)}})],1),a("el-form-item",{attrs:{label:"实验室级别"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{disabled:""},model:{value:e.currentRow.data.Laboratory.laboratoryInfo.level,callback:function(t){e.$set(e.currentRow.data.Laboratory.laboratoryInfo,"level",t)},expression:"currentRow.data.Laboratory.laboratoryInfo.level"}},[a("el-option",{attrs:{label:"国家级",value:"1"}}),a("el-option",{attrs:{label:"省级",value:"2"}}),a("el-option",{attrs:{label:"地市级",value:"3"}}),a("el-option",{attrs:{label:"县(区)级",value:"4"}}),a("el-option",{attrs:{label:"其他",value:"5"}})],1)],1),a("el-form-item",{attrs:{label:"实验室地址"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.addr)}})],1),a("el-form-item",{attrs:{label:"建设起止日期"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.buildstarttime).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"实验室负责人"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.leadingname)}})],1),a("el-form-item",{attrs:{label:"实验室联系人"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.linkname)}})],1),a("el-form-item",{attrs:{label:"实验室照片"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.Laboratory.laboratoryInfo.imgsrc}})]),a("el-form-item",{attrs:{label:"主管单位"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.unit)}})],1),a("el-form-item",{attrs:{label:"实验室类别"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{disabled:"",placeholder:"请选择实验室类别"},model:{value:e.currentRow.data.Laboratory.laboratoryInfo.category,callback:function(t){e.$set(e.currentRow.data.Laboratory.laboratoryInfo,"category",t)},expression:"currentRow.data.Laboratory.laboratoryInfo.category"}},[a("el-option",{attrs:{label:"主实验室",value:"1"}}),a("el-option",{attrs:{label:"辅助实验室",value:"2"}}),a("el-option",{attrs:{label:"其他",value:"3"}})],1)],1),a("el-form-item",{attrs:{label:"实验室面积"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.area+"平方")}})],1),a("el-form-item",{attrs:{label:"最新投运时间"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.operationtime).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"负责人电话"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.leadingphone)}})],1),a("el-form-item",{attrs:{label:"联系人电话"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.linkphone)}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实验室认证类型"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.region)}})],1),a("el-form-item",{attrs:{label:"发证机关"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.licencsIssuing)}})],1),a("el-form-item",{attrs:{label:"初次认可"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.initialRecognition).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.desc)}})],1),a("el-form-item",{attrs:{label:"证书编号"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.credentialsname)}})],1),a("el-form-item",{attrs:{label:"签发日期"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.dateOfIssue).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"有效期至"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.termOfValidity).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"更新时间"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.updatedDate).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"证书电子文件"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.Laboratory.laboratoryInfo.imgsrc1}})])],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 确 定 ")])],1)],1):e._e()],1)},i=[],s=(a("b0c0"),a("a15b"),a("23a5")),o=(a("30f8"),{name:"",data:function(){return{dialogVisible:!1,formInline:{user:"",region:"all"},tableData:[],start:0,pagesize:10,total:0,authenticationid:"",verifyForm:{status:1,suggestion:""},verifyFormRules:{status:[{required:!0,message:"请选择审核状态",trigger:"change"}],suggestion:[{required:!0,message:"请填写认证审核意见",trigger:"blur"}]},dialogFormVisible:!1,form1:{name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:[],roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""},regionData:s["regionData"],verifyForm1:{cnasname:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",cnasimgsrc:"",cnasdesc:""},verifyForm2:{cmaname:"",cmadateOfIssue:"",cmalicencsIssuing:"",cmatermOfValidity:"",cmaimgsrc:"",cmadesc:""},previewother:{otherform:[]},currentRow:{data:{}},activeName:"first"}},computed:{fileDomain:function(){return this.$getUrlPrefix(this.$Cookies.get("fileserver"))}},mounted:function(){this.getEmpower()},methods:{headClass:function(){return"text-align:center"},rowClass:function(){return"text-align:center"},getAddr:function(e){e.length;for(var t="",a=0;a<e.length;a++)t+=s["CodeToText"][e[a]]+"/";return t},Others:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].name);return t.join(",")},getEmpower:function(){var e=this,t=this.$loading({background:"rgba(0, 0, 0, 0.5)"});this.$axiosWen.get("iotapi/classes/Dict",{params:{where:{type:"CompanyAuthentication"},order:"-updatedAt"}}).then((function(a){t.close(),a&&a.results?e.tableData=a.results:e.tableData=[]})).catch((function(a){e.tableData=[],t.close()}))},lookUp:function(e){this.dialogFormVisible=!0,this.currentRow=e,this.currentRow.data=e.data},examine:function(e){this.currentRow=e,this.dialogVisible=!0},handleSizeChange:function(e){},handleCurrentChange:function(e){},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;var r=(new Date).getTime();t.currentRow.data.verifyStatus=t.verifyForm.status,t.currentRow.data.suggestion=t.verifyForm.suggestion,t.currentRow.data.auditDate=r,t.$axiosWen.put("classes/Dict/"+t.currentRow.objectId,{data:t.currentRow.data}).then((function(a){a&&(t.$message({type:"success",message:"审核成功"}),t.$refs[e].resetFields(),t.dialogVisible=!1,t.getEmpower())})).catch((function(e){t.$message({message:"审核失败"})}))}))}}}),n=o,l=(a("51c1"),a("b244"),a("2877")),c=Object(l["a"])(n,r,i,!1,null,"083572d3",null);t["default"]=c.exports},c9a7:function(e,t,a){},cc5a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"license"},[a("div",{staticClass:"licenseleft"},[a("el-row",[a("el-col",{attrs:{span:12}},[0==e.isend?a("img",{attrs:{src:e.originimgsrc,alt:"",srcset:""}}):e._e(),1==e.isend?a("img",{attrs:{src:e.originimgsrc,alt:"",srcset:""}}):e._e()]),a("el-col",{attrs:{span:12}},[0==e.isend?a("div",{staticClass:"originupdate"},[a("p",[e._v("部署配置")]),a("span",[e._v("请完成配置后进行部署")])]):e._e()])],1),a("el-row",{staticStyle:{"margin-top":"50px"}},[a("el-col",{staticClass:"originupdate",attrs:{span:12}},[a("p",[e._v("当前时间:")]),a("span",[e._v(e._s(e.updatetime))])]),a("el-col",{staticClass:"originupdate",attrs:{span:12}},[a("p",[e._v("服务器状态")]),0==e.isarrange?a("span",[e._v("未部署")]):a("span",[e._v("部署完成")])])],1)],1),a("div",{staticClass:"licenseright"},[a("div",{staticClass:"righttop"},[a("p",{staticStyle:{"font-size":"20px"}},[e._v("部署进度")]),a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"基础服务部署"}}),a("el-step",{attrs:{title:"数据库部署"}}),a("el-step",{attrs:{title:"完成"}})],1)],1),a("div",{staticClass:"rightcenter"},[a("p",{staticStyle:{"font-size":"20px",color:"#67c23a"}},[e._v("机器信息")]),a("el-form",{ref:"form",attrs:{model:e.configdata,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"用户名:"}},[a("span",[e._v(e._s(e.configdata.hostName))])]),a("el-form-item",{attrs:{label:"计算机信息:"}},[a("span",[e._v(e._s(e.configdata.computerConfig))])]),a("el-form-item",{attrs:{label:"IP地址(公):"}},[a("span",[e._v(e._s(e.configdata.wlanIp))])]),a("el-form-item",{attrs:{label:"IP地址(私):"}},[a("span",[e._v(e._s(e.configdata.natIP))])]),a("el-form-item",{attrs:{label:"授权状态:"}},[a("span",[e._v(e._s(e.configdata.computerAuth))])]),a("el-form-item",{attrs:{label:"服务器连接状态:"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),a("el-form-item",{attrs:{label:"数据库是否部署:"}},[1==e.configdata.dbInstalled?a("span",[e._v("是")]):a("span",[e._v("否")])]),a("el-form-item",{attrs:{label:"机器码:"}},[a("span",[e._v(e._s(e.configdata.computerKey))])]),a("el-form-item",{attrs:{label:"数据中心地址:"}},[a("el-input",{attrs:{placeholder:"请输入数据中心地址"},model:{value:e.configdata.infomation,callback:function(t){e.$set(e.configdata,"infomation",t)},expression:"configdata.infomation"}})],1),a("el-form-item",{attrs:{label:"授权码:"}},[a("el-input",{attrs:{placeholder:"请输入授权码"},model:{value:e.configdata.authorizenumber,callback:function(t){e.$set(e.configdata,"authorizenumber",t)},expression:"configdata.authorizenumber"}})],1),a("el-form-item",{attrs:{label:"服务版本:"}},[a("el-select",{attrs:{placeholder:"请输入服务版本"},model:{value:e.configdata.standard,callback:function(t){e.$set(e.configdata,"standard",t)},expression:"configdata.standard"}},[a("el-option",{attrs:{label:"标准版",value:"standard"}}),a("el-option",{attrs:{label:"企业版",value:"enterprise"}}),a("el-option",{attrs:{label:"旗舰版",value:"ultimate"}})],1)],1),a("el-form-item",[e.dbinstall?a("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"success"},on:{click:e.uploadHub}},[e._v(" 部 署 ")]):a("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"success"},on:{click:e.uploadDb}},[e._v(" 数据库部署 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("刷新")])],1)],1)],1)])])},i=[],s=a("1c4e"),o=a("be65"),n=a.n(o),l={data:function(){return{value2:!1,isarrange:!1,isend:!1,timer:null,updatetime:"",active:1,authorizenumber:"",dbinstall:!0,configdata:{computerAuth:"",natIP:"",wlanIp:"",computerKey:"",computerConfig:"",hostName:"",infomation:"localhost",standard:"standard",authorizenumber:"",dbInstalled:""},standard:"standard"}},mounted:function(){window.clearInterval(this.timer),this.timeUpdate(),this.getHardInfo(),n.a.get("authorizenumber")?this.configdata.authorizenumber=n.a.get("authorizenumber"):this.configdata.authorizenumber=""},beforeDestroy:function(){window.clearInterval(this.timer),this.timer=null},methods:{nowtime:function(){var e=Date.parse(new Date),t=new Date(e),a=t.getFullYear()+"-",r=(t.getMonth()+1<=10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=(t.getDate()+1<=10?"0"+t.getDate():t.getDate())+" ",s=(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":",o=(t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":",n=t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds();this.updatetime=a+r+i+s+o+n},timeUpdate:function(){var e=this;e.timer=window.setInterval((function(){e.nowtime()}),1e3)},getHardInfo:function(){var e=this;Object(s["hardInfo"])().then((function(t){e.configdata.computerAuth=t.computerAuth,e.configdata.natIP=t.natIP,e.configdata.wlanIp=t.wlanIp,e.configdata.computerKey=t.computerKey,e.configdata.hostName=t.hostName,e.configdata.computerConfig=t.computerConfig,e.configdata.dbInstalled=t.dbInstalled,e.value2=t.serverHealth}))},uploadHub:function(){var e=this;""!=this.configdata.infomation?""!=this.configdata.authorizenumber?Object(s["iotHub"])(this.configdata.standard,this.configdata.authorizenumber,this.configdata.infomation).then((function(t){if(1==t.result)e.active=3,e.$router.push("/login");else{if("license_failed"==t.status)return void e.$message("授权码错误，请重新填写");if("server_disconnected"==t.status)return void e.$message("服务器未连接");"database_uninstalled"==t.status&&(e.active=2,e.$message("服务器部署完成，请完成下一步数据库部署"),e.dbinstall=!1,n.a.set("authorizenumber",e.configdata.authorizenumber))}})):this.$message("请填写授权码"):this.$message("请填写数据中心地址")},uploadDb:function(){}}},c=l,d=(a("499a"),a("2877")),u=Object(d["a"])(c,r,i,!1,null,"37659a8c",null);t["default"]=u.exports},cd2d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"loginbanner"},[a("el-form",{ref:"ruleForm2",staticClass:"login-form",attrs:{model:e.ruleForm2,rules:e.rules2,"status-icon":"","label-width":"100px"}},[a("div",{staticClass:"logo"},[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.logosrc,alt:"logo"}}),a("p",[e._v("重置密码")])]),a("el-form-item",{staticStyle:{"border-radius":"0"},attrs:{prop:"phone"}},[a("span",{staticClass:"svg-container",staticStyle:{display:"inline-block",width:"150px",padding:"0",color:"black","vertical-align":"middle"}},[a("el-select",{staticStyle:{border:"0"},attrs:{placeholder:"请选择手机区域"},model:{value:e.ruleForm2.value,callback:function(t){e.$set(e.ruleForm2,"value",t)},expression:"ruleForm2.value"}},e._l(e.ruleForm2.diqu,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-input",{ref:"phonerole",staticStyle:{width:"250px"},attrs:{maxlength:11,name:"phone",type:"text","auto-complete":"on",placeholder:"请输入手机号"},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1),a("div",{staticClass:"yzm",staticStyle:{height:"50px","margin-bottom":"20px","margin-left":"20px"}},[a("el-input",{staticClass:"yzm",staticStyle:{float:"left",width:"75%",border:"1px solid #cccccc","border-radius":"0"},attrs:{type:"text",placeholder:"请输入验证码","auto-complete":"off"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("el-button",{staticStyle:{float:"right",width:"25%",height:"47px",padding:"12px 15px 12px 15px","border-radius":"0"},attrs:{disabled:e.sendMsgDisabled,type:"primary"},on:{click:e.send}},[e.sendMsgDisabled?a("span",[e._v(e._s(e.time+"秒后获取"))]):e._e(),e.sendMsgDisabled?e._e():a("span",[e._v("发送验证码")])])],1),a("el-form-item",{attrs:{prop:"password",required:""}},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"password"}})],1),a("el-input",{attrs:{type:e.pwdType,maxlength:10,name:"password","auto-complete":"new-password",placeholder:"请输入6-10位数字字母组合"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("vab-icon",{attrs:{icon:"eye"}})],1)],1),a("el-form-item",{attrs:{prop:"checkPass",required:""}},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"password"}})],1),a("el-input",{attrs:{type:e.pwdType,maxlength:10,"auto-complete":"new-password",placeholder:"请再次输入密码"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("vab-icon",{attrs:{icon:"eye"}})],1)],1),a("div",{staticClass:"hasuser",staticStyle:{"box-sizing":"border-box","padding-left":"22px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.resetPassword("ruleForm2")}}},[e._v(" 确 定 ")])],1)],1)],1)])},i=[],s=(a("d81d"),a("d3b7"),a("25f0"),a("8665")),o=(a("f43e").Base64,{data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入密码")):(/^\w{6,10}$/.test(t)||a(new Error("密码格式不正确")),a())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.ruleForm2.password?r(new Error("两次输入密码不一致!")):r()};return{password:"",time:60,sendMsgDisabled:!1,logosrc:"",title:"",phonesms:"",code:"",ruleForm2:{account:"",phone:"",password:"",checkPass:"",roles:"",diqu:[],value:"+86/中国"},protype:"",rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,a){var r=/^1[3-9]\d{9}$/;r.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],password:[{validator:t,trigger:"blur",required:!0}],checkPass:[{validator:a,trigger:"blur",required:!0}],username:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:5,message:"姓名格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],roles:[{required:!0,message:"请选择平台",trigger:"change"}]},pwdType:"password",origin:["+86/中国","+886/中国台湾","+852/中国香港","+91/India","+244/Angola","+54/Argentina","+1/American Samoa","+880/Bangladesh","+56/Chile","+855/Cambodia","+20/Egypt","+33/France","+49/Germany","+62/Indonesia","+353/Ireland","+972/Israel","+39/Italy","+81/Japan","+60/Malaysia","+63/Philippines","+92/Pakistan","+82/South Korea","+46/Sweden","+65/Singapore","+27/South Africa","+66/Thailand","+971/United Arab Emirates","+44/United Kingdom","+1/United States","+84/Vietnam","+967/Yemen","+260/Zambia"]}},mounted:function(){var e=this;this.protype=sessionStorage.getItem("roletype"),this.title=sessionStorage.getItem("product_title"),this.logosrc=sessionStorage.getItem("imgsrc"),this.ruleForm2.diqu=[],this.origin.map((function(t){e.ruleForm2.diqu.push({label:t,value:t.toString()})}))},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},login:function(){this.$router.push({path:"/login"})},send:function(){var e=this;this.$refs.ruleForm2.validateField("phone",(function(t){t?e.$message("请输入手机号"):e.findUserAndSendCode()}))},findUserAndSendCode:function(){var e=this,t=this;Object(s["Phonelogin"])(t.ruleForm2.phone,encodeURIComponent(t.ruleForm2.value)).then((function(a){if(a){e.$message({message:"发送成功",type:"success"}),t.sendMsgDisabled=!0,e.time=a.expire;var r=window.setInterval((function(){t.time--<=0&&(t.time=60*this.time,t.sendMsgDisabled=!1,window.clearInterval(r))}),1e3)}})).catch((function(t){e.$message(t.error)}))},resetPassword:function(e){var t=this;this.$refs[e].validate((function(e){e&&(""==t.code?t.$message("请输入手机验证码"):Object(s["passwordreset"])(t.ruleForm2.phone,t.code,t.ruleForm2.password).then((function(e){e&&t.$router.push({path:"/login"})})).catch((function(e){t.$message(e.error)})))}))}}}),n=o,l=(a("c2a7"),a("8488"),a("3006"),a("2877")),c=Object(l["a"])(n,r,i,!1,null,"7b060cae",null);t["default"]=c.exports},cfa6:function(e,t,a){},d88f:function(e,t,a){},da40:function(e,t,a){"use strict";a("0493")},de5c:function(e,t,a){"use strict";a("03ad")},e50d:function(e,t,a){},ea1e:function(e,t,a){},eaef:function(e,t,a){"use strict";a("3c20")},eb47:function(e,t,a){},f271:function(e,t,a){"use strict";a("9616")},f63d:function(e,t,a){"use strict";a("9612")},f954:function(e,t,a){"use strict";a("236f")},fcac:function(e,t,a){"use strict";a.r(t);var r,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"module"},[a("div",{attrs:{id:"editor_holder"}}),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.addmodule}},[e._v(" 保 存 ")])],1)},s=[],o=(a("d81d"),a("973c")),n=(a("8bbf"),{type:"object",title:"水泵检测模板配置",properties:{sample:{type:"string",description:"产品名称",minLength:10},category:{type:"string",description:"检验类别"},inspection_standard:{type:"string",description:"检验标准"},inspecting:{type:"array",title:"检测名称",items:{type:"object",properties:{inspecting_item:{type:"string",description:"检验项目"},guarantee_value:{type:"array",title:"保证值",format:"table",uniqueItems:!0,items:{type:"object",title:"保证值",properties:{title:{type:"string",description:"保证值"},value:{type:"string",description:"测试值"},assess:{type:"string",description:"评定"},evidenceway:{type:"string",description:"取证方式"},evidence:{type:"string",description:"证据链"}}}}}}}},default:{}});JSONEditor.defaults.options.theme="foundation4";var l={data:function(){return{default:"",reportId:"",editor:""}},mounted:function(){this.getSchema()},methods:{getSchema:function(){if(this.reportId=this.$route.query.id,JSONEditor.defaults.options.show_errors="change",this.reportId){var e=Parse.Object.extend("Datas"),t=new Parse.Query(e);t.get(this.reportId).then((function(e){n.default=e.attributes.data,n.default.inspecting.map((function(e){e.guarantee_value.map((function(e){delete e.id}))})),r=new JSONEditor(document.getElementById("editor_holder"),{schema:n,theme:"foundation4"})}))}else n.default={},r=new JSONEditor(document.getElementById("editor_holder"),{schema:n})},addmodule:function(){var e=this,t=r.validate({});t.length||Object(o["addReport"])(r.getValue(),this.reportId).then((function(t){t&&(e.$message({type:"success",message:"添加成功!"}),e.$router.push({path:"/reportmodule/index"}))})).catch((function(t){e.$message({type:"error",message:t.error})}))}}},c=l,d=(a("1747"),a("a939"),a("2877")),u=Object(d["a"])(c,i,s,!1,null,"1f6c7692",null);t["default"]=u.exports}}]);